(()=>{var e,t={730:(e,t,a)=>{"use strict";var s=a(196);const o=window.wp.element,l={setAutoConnect:e=>({type:"SET_AUTO_CONNECT",autoConnect:e}),setAPIKey:e=>({type:"SET_API_KEY",apiKey:e}),setAvailableApps:e=>({type:"SET_AVAILABLE_APPS",availableApps:e}),setIsConnected:e=>({type:"SET_IS_CONNECTED",isConnected:e}),setIsConnecting:e=>({type:"SET_IS_CONNECTING",isConnecting:e}),setIsLoading:e=>({type:"SET_IS_LOADING",isLoading:e}),sethasDashboardLoaded:e=>({type:"SET_HAS_DASHBOARD_LOADED",hasDashboardLoaded:e}),setHasRestError:e=>({type:"SET_HAS_REST_ERROR",hasRestError:e}),setHasValidKey:e=>({type:"SET_HAS_VALID_KEY",hasValidKey:e}),setHasApplication:e=>({type:"SET_HAS_APPLICATION",hasApplication:e}),setUserData:e=>({type:"SET_USER_DATA",data:e}),setUserStatus:e=>({type:"SET_USER_STATUS",status:e}),setShowDisconnect:e=>({type:"SET_SHOW_DISCONNECT",showDisconnect:e}),setConflicts:e=>({type:"SET_CONFLICTS",conflicts:e}),setOptimizedImages:e=>({type:"SET_OPTIMIZED_IMAGES",optimizedImages:e}),setSiteSettings:e=>({type:"SET_SITE_SETTINGS",siteSettings:e}),setExtraVisits:e=>({type:"SET_EXTRA_VISITS",extraVisitsStatus:e}),setSampleRate:e=>({type:"SET_SAMPLE_RATE",sampleRate:e}),setTotalNumberOfImages:e=>({type:"SET_TOTAL_NUMBER_OF_IMAGES",totalNumberOfImages:e}),setProcessedImages:e=>({type:"SET_PROCESSED_IMAGES",processedImages:e}),setOffloadLibraryLink:e=>({type:"SET_OFFLOAD_LIBRARY_LINK",offloadLibraryLink:e}),setRollbackLibraryLink:e=>({type:"SET_ROLLBACK_LIBRARY_LINK",rollbackLibraryLink:e}),setLoadingRollback:e=>({type:"SET_LOADING_ROLLBACK",loadingRollback:e}),setLoadingSync:e=>({type:"SET_LOADING_SYNC",loadingSync:e}),setQueryArgs:e=>({type:"SET_QUERY_ARGS",queryArgs:e}),setErrorMedia:e=>({type:"SET_ERROR_MEDIA",errorMedia:e}),setEstimatedTime:e=>({type:"SET_ESTIMATED_TIME",estimatedTime:e}),setCheckedOffloadConflicts:e=>({type:"SET_CHECKED_OFFLOAD_CONFLICTS",checkedOffloadConflicts:e}),setOffloadConflicts:e=>({type:"SET_OFFLOAD_CONFLICTS",offloadConflicts:e}),setLogs:(e,t)=>({type:"SET_LOGS",logsType:e,logs:t}),setShowFinishNotice:e=>({type:"SET_SITE_SETTINGS",siteSettings:{show_offload_finish_notice:e}}),setOffloadLimitReached:e=>({type:"SET_SITE_SETTINGS",siteSettings:{offload_limit_reached:e}}),ensureOffloadingRollbackDisabled:()=>({type:"SET_SITE_SETTINGS",siteSettings:{offloading_status:"disabled",rollback_status:"disabled"}}),setOffloadLimit:e=>({type:"SET_OFFLOAD_LIMIT",offloadLimit:e})},n={autoConnect:optimoleDashboardApp.auto_connect,isConnected:"yes"===optimoleDashboardApp.connection_status,isConnecting:!1,isLoading:!1,hasRestError:!1,hasValidKey:!0,hasApplication:"yes"===optimoleDashboardApp.has_application,apiKey:optimoleDashboardApp.api_key?optimoleDashboardApp.api_key:"",userStatus:optimoleDashboardApp.user_status?optimoleDashboardApp.user_status:"inactive",userData:optimoleDashboardApp.user_data?optimoleDashboardApp.user_data:null,availableApps:optimoleDashboardApp.available_apps?optimoleDashboardApp.available_apps:null,hasDashboardLoaded:"yes"===optimoleDashboardApp.connection_status,showDisconnect:!1,conflicts:[],optimizedImages:[],siteSettings:optimoleDashboardApp.site_settings,sampleRate:{},totalNumberOfImages:0,processedImages:0,offloadLibraryLink:!1,rollbackLibraryLink:!1,loadingRollback:!1,loadingSync:!1,queryArgs:[],errorMedia:!1,checkedOffloadConflicts:!1,offloadConflicts:[],offloadLimit:optimoleDashboardApp.offload_limit||5e4,logs:{offload:"",rollback:""}},r=(e=n,t)=>{switch(t.type){case"SET_AUTO_CONNECT":return{...e,autoConnect:t.autoConnect};case"SET_HAS_REST_ERROR":case"SET_HAS_REST_ERROR":return{...e,hasRestError:t.hasRestError};case"SET_API_KEY":return{...e,apiKey:t.apiKey};case"SET_AVAILABLE_APPS":return{...e,availableApps:t.availableApps};case"SET_IS_CONNECTED":return{...e,isConnected:t.isConnected};case"SET_IS_CONNECTING":return{...e,isConnecting:t.isConnecting};case"SET_IS_LOADING":return{...e,isLoading:t.isLoading};case"SET_HAS_DASHBOARD_LOADED":return{...e,hasDashboardLoaded:t.hasDashboardLoaded};case"SET_HAS_VALID_KEY":return{...e,hasValidKey:t.hasValidKey};case"SET_HAS_APPLICATION":return{...e,hasApplication:t.hasApplication};case"SET_USER_DATA":let a="inactive";const{data:s}=t;if(s&&s.app_count&&1<=s.app_count&&s.cdn_key)for(let e of s.available_apps)e.key&&e.key===s.cdn_key&&e.status&&"active"===e.status&&(a="active");return{...e,userData:t.data,userStatus:a};case"SET_USER_STATUS":return{...e,userStatus:t.status};case"SET_SHOW_DISCONNECT":return{...e,showDisconnect:t.showDisconnect};case"SET_CONFLICTS":return{...e,conflicts:t.conflicts};case"SET_OPTIMIZED_IMAGES":return{...e,optimizedImages:t.optimizedImages};case"SET_SITE_SETTINGS":let{siteSettings:o}=e;for(let e in t.siteSettings)o[e]=t.siteSettings[e];return{...e,siteSettings:o};case"SET_EXTRA_VISITS":{let{siteSettings:a}=e;return a.banner_frontend=t.extraVisitsStatus?"enabled":"disabled",{...e,siteSettings:a}}case"SET_SAMPLE_RATE":return{...e,sampleRate:t.sampleRate};case"SET_TOTAL_NUMBER_OF_IMAGES":return{...e,totalNumberOfImages:t.totalNumberOfImages};case"SET_PROCESSED_IMAGES":return{...e,processedImages:t.processedImages};case"SET_OFFLOAD_LIBRARY_LINK":return{...e,offloadLibraryLink:t.offloadLibraryLink};case"SET_ROLLBACK_LIBRARY_LINK":return{...e,rollbackLibraryLink:t.rollbackLibraryLink};case"SET_LOADING_ROLLBACK":return Object.prototype.hasOwnProperty.call(e.queryArgs,"optimole_action")&&(e.rollbackLibraryLink=!t.loadingSync),{...e,loadingRollback:t.loadingRollback};case"SET_LOADING_SYNC":return Object.prototype.hasOwnProperty.call(e.queryArgs,"optimole_action")&&(e.offloadLibraryLink=!t.loadingSync),{...e,loadingSync:t.loadingSync};case"SET_QUERY_ARGS":return{...e,queryArgs:t.queryArgs};case"SET_ERROR_MEDIA":return{...e,errorMedia:t.errorMedia};case"SET_CHECKED_OFFLOAD_CONFLICTS":return{...e,checkedOffloadConflicts:t.checkedOffloadConflicts};case"SET_OFFLOAD_CONFLICTS":return{...e,offloadConflicts:t.offloadConflicts};case"SET_LOGS":let{logs:l}=e;return l[t.logsType]=t.logs,{...e,logs:l};case"SET_OFFLOAD_LIMIT":return{...e,offloadLimit:t.offloadLimit};default:return e}},i={getAutoConnect:e=>e.autoConnect,getAPIKey:e=>e.apiKey,getAvailableApps:e=>e.availableApps,hasRestError:e=>e.hasRestError,hasValidKey:e=>e.hasValidKey,hasApplication:e=>e.hasApplication,hasDashboardLoaded:e=>e.hasDashboardLoaded,getUserData:e=>e.userData,getUserStatus:e=>e.userStatus,isConnected:e=>e.isConnected,isConnecting:e=>e.isConnecting,isLoading:e=>e.isLoading,showDisconnect:e=>e.showDisconnect,getConflicts:e=>e.conflicts,getOptimizedImages:e=>e.optimizedImages,getSiteSettings:(e,t=void 0)=>t?void 0!==e.siteSettings[t]?e.siteSettings[t]:void 0:e.siteSettings,getSampleRate:e=>e.sampleRate,getTotalNumberOfImages:e=>e.totalNumberOfImages,getProcessedImages:e=>e.processedImages,getOffloadLibraryLink:e=>e.offloadLibraryLink,getRollbackLibraryLink:e=>e.rollbackLibraryLink,getLoadingRollback:e=>e.loadingRollback,getLoadingSync:e=>e.loadingSync,getQueryArgs:e=>e.queryArgs,getErrorMedia:e=>e.errorMedia,getCheckedOffloadConflicts:e=>e.checkedOffloadConflicts,getOffloadConflicts:e=>e.offloadConflicts,getOffloadLimit:e=>e.offloadLimit,getLogs:(e,t=void 0)=>t?void 0!==e.logs[t]?e.logs[t]:void 0:e.logs,isSubApiKey:e=>e.apiKey&&e.apiKey.startsWith("optml-s")};if(void 0!==wp.data.createReduxStore){const e=wp.data.createReduxStore("optimole",{reducer:r,actions:l,selectors:i});wp.data.register(e)}else wp.data.registerStore("optimole",{reducer:r,actions:l,selectors:i});const c=window.wp.data;var d=a(184),m=a.n(d);const p=window.wp.primitives,g=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z"})),u=window.wp.components,b=()=>(0,s.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none"},(0,s.createElement)("path",{d:"M17.357 2.92894C16.9664 2.53842 16.3333 2.53842 15.9427 2.92894C15.5522 3.31946 15.5522 3.95263 15.9427 4.34315L17.357 2.92894ZM16.6499 16.364L15.9427 17.0711H15.9427L16.6499 16.364ZM14.5285 5.75737C14.138 5.36684 13.5048 5.36684 13.1143 5.75737C12.7238 6.14789 12.7238 6.78106 13.1143 7.17158L14.5285 5.75737ZM13.8214 13.5355L13.1143 14.2426L13.1143 14.2427L13.8214 13.5355ZM6.04325 14.2427C6.43377 14.6332 7.06694 14.6332 7.45746 14.2427C7.84799 13.8521 7.84799 13.219 7.45746 12.8284L6.04325 14.2427ZM6.32586 10.5662C6.24822 10.0194 5.74201 9.63905 5.19521 9.71669C4.64841 9.79434 4.26808 10.3005 4.34573 10.8473L6.32586 10.5662ZM3.21482 17.0711C3.60535 17.4616 4.23851 17.4616 4.62903 17.0711C5.01956 16.6806 5.01956 16.0474 4.62903 15.6569L3.21482 17.0711ZM2.70292 7.44452C2.87885 6.921 2.59707 6.354 2.07355 6.17807C1.55004 6.00215 0.98303 6.28393 0.807105 6.80744L2.70292 7.44452ZM1.993 0.292893C1.60247 -0.0976311 0.969306 -0.0976311 0.578782 0.292893C0.188258 0.683417 0.188258 1.31658 0.578782 1.70711L1.993 0.292893ZM18.5788 19.7071C18.9693 20.0976 19.6025 20.0976 19.993 19.7071C20.3835 19.3166 20.3835 18.6834 19.993 18.2929L18.5788 19.7071ZM15.9427 4.34315C19.0669 7.46735 19.0669 12.5327 15.9427 15.6569L17.357 17.0711C21.2622 13.1658 21.2622 6.83418 17.357 2.92894L15.9427 4.34315ZM13.1143 7.17158C14.6764 8.73368 14.6764 11.2663 13.1143 12.8284L14.5285 14.2427C16.8717 11.8995 16.8717 8.10051 14.5285 5.75737L13.1143 7.17158ZM10.2859 10H12.2859C12.2859 8.89544 11.3905 8.00001 10.2859 8.00001V10ZM7.45746 12.8284C6.81978 12.1908 6.44341 11.394 6.32586 10.5662L4.34573 10.8473C4.52209 12.0894 5.08876 13.2882 6.04325 14.2427L7.45746 12.8284ZM4.62903 15.6569C2.40899 13.4368 1.76507 10.2354 2.70292 7.44452L0.807105 6.80744C-0.363267 10.2902 0.43743 14.2937 3.21482 17.0711L4.62903 15.6569ZM10.2859 10L10.2859 10V8.00001C9.73388 8.00001 9.23252 8.22496 8.87168 8.58578L10.2859 10ZM0.578782 1.70711L8.87168 10L10.2859 8.58579L1.993 0.292893L0.578782 1.70711ZM8.87168 10L10.2859 11.4142L11.7001 10L10.2859 8.58579L8.87168 10ZM10.2859 11.4142L13.1143 14.2426L14.5285 12.8284L11.7001 10L10.2859 11.4142ZM13.1143 14.2427L15.9427 17.0711L17.357 15.6569L14.5285 12.8284L13.1143 14.2427ZM15.9427 17.0711L18.5788 19.7071L19.993 18.2929L17.357 15.6569L15.9427 17.0711ZM10.2859 10L10.2859 10L11.7001 11.4142C12.0609 11.0534 12.2859 10.552 12.2859 10H10.2859Z",fill:"#E77777"})),h=()=>(0,s.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"16",viewBox:"0 0 21 16",fill:"none"},(0,s.createElement)("path",{d:"M4.00127 14.3639C0.486555 10.8492 0.486555 5.15071 4.00127 1.63599M16.7292 1.63599C20.2439 5.15071 20.2439 10.8492 16.7292 14.3639M6.8297 11.5355C4.87708 9.58286 4.87708 6.41704 6.8297 4.46441M13.9008 4.46441C15.8534 6.41704 15.8534 9.58286 13.9008 11.5355M11.3652 7.99995C11.3652 8.55223 10.9175 8.99995 10.3652 8.99995C9.81295 8.99995 9.36523 8.55223 9.36523 7.99995C9.36523 7.44766 9.81295 6.99995 10.3652 6.99995C10.9175 6.99995 11.3652 7.44766 11.3652 7.99995Z",stroke:"#6D955A","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})),_=((0,s.createElement)("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.9581 0C13.5192 0 17.2136 3.58 17.2136 8C17.2136 12.42 13.5192 16 8.9581 16C4.39696 16 0.702637 12.42 0.702637 8C0.702637 3.58 4.39696 0 8.9581 0ZM10.6558 9L11.0219 3H7.92606L8.29211 9H10.6558ZM11.0219 11.5115C11.0219 11.9809 10.8811 12.3473 10.6213 12.6107C10.3507 12.874 9.97188 13 9.48478 13C8.99768 13 8.61882 12.874 8.33739 12.6107C8.06677 12.3473 7.92606 11.9809 7.92606 11.5115C7.92606 11.0305 8.05595 10.6641 8.32656 10.4008C8.59717 10.1374 8.97603 10 9.48478 10C9.99353 10 10.3724 10.1374 10.6322 10.4008C10.892 10.6641 11.0219 11.0305 11.0219 11.5115Z",fill:"#AF3535"})),(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M17.25 8.25H21V4.5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.createElement)("path",{d:"M3 12C3 7.029 7.029 3 12 3C15.63 3 18.751 5.154 20.174 8.25",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.createElement)("path",{d:"M6.75 15.75H3V19.5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.createElement)("path",{d:"M21 12C21 16.971 16.971 21 12 21C8.37 21 5.249 18.846 3.826 15.75",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}))),f=(0,s.createElement)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M35.8621 13.647L22.0095 27.4996L15.085 20.5733",fill:"none",stroke:"white","stroke-width":"2.75","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.createElement)("path",{d:"M38.5 22C38.5 31.1135 31.1135 38.5 22 38.5C12.8865 38.5 5.5 31.1135 5.5 22C5.5 12.8865 12.8865 5.5 22 5.5C24.6638 5.5 27.1718 6.14717 29.3993 7.26733",fill:"none",stroke:"white","stroke-width":"2.75","stroke-linecap":"round","stroke-linejoin":"round"})),E=(0,s.createElement)("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M5 15C2.79086 15 1 13.2091 1 11C1 9.09295 2.33457 7.4976 4.12071 7.09695C4.04169 6.74395 4 6.37684 4 6C4 3.23858 6.23858 1 9 1C11.4193 1 13.4373 2.71825 13.9002 5.00098C13.9334 5.00033 13.9666 5 14 5C16.7614 5 19 7.23858 19 10C19 12.419 17.2822 14.4367 15 14.9M13 12L10 9M10 9L7 12M10 9L10 21",stroke:"#577BF9","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})),v=(0,s.createElement)("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M5 15C2.79086 15 1 13.2091 1 11C1 9.09295 2.33457 7.4976 4.12071 7.09695C4.04169 6.74395 4 6.37684 4 6C4 3.23858 6.23858 1 9 1C11.4193 1 13.4373 2.71825 13.9002 5.00098C13.9334 5.00033 13.9666 5 14 5C16.7614 5 19 7.23858 19 10C19 12.419 17.2822 14.4367 15 14.9M7 18L10 21M10 21L13 18M10 21V9",stroke:"#577BF9","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})),y=(0,s.createElement)("svg",{width:"20",height:"18",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M10.0015 8V10M10.0015 14H10.0115M3.0733 18H16.9297C18.4693 18 19.4316 16.3333 18.6618 15L11.7336 3C10.9637 1.66667 9.03925 1.66667 8.26945 3L1.34125 15C0.571445 16.3333 1.5337 18 3.0733 18Z",stroke:"#DE9F0C","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})),x=(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#577BF9",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",class:"absolute w-16 h-16 text-o-blue outline-none",role:"presentation",focusable:"false",tabindex:"-1"},(0,s.createElement)("path",{d:"M6.08998 13.28H9.17998V20.48C9.17998 22.16 10.09 22.5 11.2 21.24L18.77 12.64C19.7 11.59 19.31 10.72 17.9 10.72H14.81V3.52002C14.81 1.84002 13.9 1.50002 12.79 2.76002L5.21998 11.36C4.29998 12.42 4.68998 13.28 6.08998 13.28Z",stroke:"#577BF9","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"})),w=(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#577BF9",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",class:"absolute w-16 h-16 text-o-blue outline-none",role:"presentation",focusable:"false",tabindex:"-1"},(0,s.createElement)("path",{d:"M3 12C3 16.9706 7.02944 21 12 21C14.3051 21 16.4077 20.1334 18 18.7083L21 16M21 12C21 7.02944 16.9706 3 12 3C9.69494 3 7.59227 3.86656 6 5.29168L3 8M21 21V16M21 16H16M3 3V8M3 8H8",stroke:"#577BF9","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),A=(0,s.createElement)("svg",{viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"#577BF9","svg-inline":"",class:"absolute w-16 h-16 text-o-blue outline-none",role:"presentation",focusable:"false",tabindex:"-1"},(0,s.createElement)("polyline",{points:"336 176 225.2 304 176 255.8",stroke:"#577BF9","stroke-width":"30.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.createElement)("path",{d:"M463.1,112.37C373.68,96.33,336.71,84.45,256,48,175.29,84.45,138.32,96.33,48.9,112.37,32.7,369.13,240.58,457.79,256,464,271.42,457.79,479.3,369.13,463.1,112.37Z",stroke:"#577BF9","stroke-width":"30.5","stroke-linecap":"round","stroke-linejoin":"round"})),S=(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#577BF9",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",class:"absolute w-16 h-16 text-o-blue outline-none",role:"presentation",focusable:"false",tabindex:"-1"},(0,s.createElement)("path",{d:"M10.65 3L9.93163 3.53449L9.32754 5.54812L7.47651 4.55141L6.5906 4.68143L4.68141 6.59062L4.55139 7.47652L5.5481 9.32755L3.53449 9.93163L3 10.65V13.35L3.53449 14.0684L5.54811 14.6725L4.55142 16.5235L4.68144 17.4094L6.59063 19.3186L7.47653 19.4486L9.32754 18.4519L9.93163 20.4655L10.65 21H13.35L14.0684 20.4655L14.6725 18.4519L16.5235 19.4486L17.4094 19.3185L19.3186 17.4094L19.4486 16.5235L18.4519 14.6724L20.4655 14.0684L21 13.35V10.65L20.4655 9.93163L18.4519 9.32754L19.4486 7.47654L19.3186 6.59063L17.4094 4.68144L16.5235 4.55142L14.6725 5.54812L14.0684 3.53449L13.35 3H10.65Z",stroke:"#577BF9","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.createElement)("circle",{cx:"12",cy:"12",r:"3.75",stroke:"#577BF9","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),N=(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},(0,s.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.createElement)("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),(0,s.createElement)("path",{d:"M2 12h20"})),D=(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},(0,s.createElement)("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),(0,s.createElement)("circle",{cx:"12",cy:"7",r:"4"})),C=window.wp.apiFetch;var L=a.n(C);const k=window.wp.url,T=window.wp.notices,I=window.optimoleDashboardApp.submenu_links,O=(e=!0)=>{const t=document.querySelector("li#toplevel_page_optimole");let a=document.querySelector("li#toplevel_page_optimole .wp-submenu");a||(a=document.createElement("ul"),a.classList.add("wp-submenu","wp-submenu-wrap"),t.classList.add("wp-has-submenu","wp-has-current-submenu","wp-menu-open"),t.appendChild(a)),e?(I.forEach((e=>{if(document.querySelector(`li#toplevel_page_optimole a[href="${e.href}"]`))return;const t=document.createElement("li"),s=document.createElement("a");s.href=e.href,s.innerHTML=e.text,t.appendChild(s),e.hash&&e.hash===window.location.hash&&(t.classList.add("current"),s.classList.add("current")),a.appendChild(t)})),a.style.display="block"):a.style.display="none"},{setIsConnected:M,setIsConnecting:z,setIsLoading:j,setHasRestError:B,setHasValidKey:R,setHasApplication:H,setAPIKey:F,setUserData:P,setAvailableApps:q,sethasDashboardLoaded:V,setShowDisconnect:G,setConflicts:$,setOptimizedImages:K,setSiteSettings:Z,setSampleRate:U,setCheckedOffloadConflicts:Y,setOffloadConflicts:Q,setLoadingSync:W,setLoadingRollback:X,setTotalNumberOfImages:J,setProcessedImages:ee,setErrorMedia:te,setOffloadLibraryLink:ae,setRollbackLibraryLink:se,setExtraVisits:oe,setLogs:le,setShowFinishNotice:ne,setOffloadLimitReached:re,ensureOffloadingRollbackDisabled:ie,setOffloadLimit:ce}=(0,c.dispatch)("optimole"),{getOptimizedImages:de,getQueryArgs:me,getTotalNumberOfImages:pe,getSiteSettings:ge}=(0,c.select)("optimole"),{createNotice:ue}=(0,c.dispatch)(T.store),be=(e={})=>{e.offset=void 0!==e.offset?e.offset:0,L()({path:optimoleDashboardApp.routes.upload_onboard_images,method:"POST",data:e}).then((t=>{!1===t.data&&1e3>e.offset&&be({offset:e.offset+100}),"success"===t.code&&console.log("%c Images Crawled.","color: #59B278")})).catch((e=>(console.log("Error while crawling images",e),e.data)))},he=(e,t=(()=>{}))=>{z(!0),j(!0),B(!1),L()({path:optimoleDashboardApp.routes.register_service,method:"POST",data:e,parse:!1}).then((e=>e.json())).then((e=>(z(!1),j(!1),"success"===e.code&&(M(!0),R(!0),H(!0),F(e.data.api_key),P(e.data),q(e.data),be(),O(!0)),t&&t(e),e.data))).catch((e=>(z(!1),j(!1),B(!0),e.data)))},_e=()=>{j(!0),L()({path:optimoleDashboardApp.routes.disconnect,method:"GET",parse:!1}).then((e=>{j(!1),H(!1),F(""),P(null),q(null),e.ok?(M(!1),V(!1),G(!1),O(!1),console.log("%c Disconnected from OptiMole API.","color: #59B278")):console.error(e)}))},fe=()=>{j(!0),L()({path:optimoleDashboardApp.routes.request_update,method:"GET",parse:!1}).then((e=>200<=e.status&&300>e.status?e.json():(console.log(`%c Request failed with status ${e.status}`,"color: #E7602A"),Promise.resolve()))).then((e=>{j(!1),e&&(P(e.data),void 0!==e?.data?.extra_visits&&oe(e.data.extra_visits),"disconnected"===e.code&&(M(!1),V(!1),console.log("%c Disconnected from OptiMole API.","color: #59B278")))}))},Ee=(e=(()=>{}))=>{if(0<de().length)return console.log("%c Images already exist.","color: #59B278"),e&&e(),!1;L()({path:optimoleDashboardApp.routes.poll_optimized_images,method:"GET"}).then((t=>{"success"===t.code?(K(t.data),console.log("%c Images Fetched.","color: #59B278")):console.log("%c No images available.","color: #E7602A"),e&&e(t)})).catch((e=>(console.log("Error while polling images",e),e.data)))},ve=(e,t=!1,a=!1,s=(()=>{}))=>{j(!0),L()({path:optimoleDashboardApp.routes.update_option,method:"POST",data:{settings:e}}).then((e=>{j(!1),"success"===e.code&&(Z(e.data),a||Se(optimoleDashboardApp.strings.options_strings.settings_saved),console.log("%c Settings Saved.","color: #59B278"))})).then((()=>{t&&fe()})).then((()=>{s()})).catch((e=>(j(!1),Se(optimoleDashboardApp.strings.options_strings.settings_saved_error),console.log("Error while saving settings",e),e.data)))},ye=e=>{j(!0),L()({path:optimoleDashboardApp.routes.clear_cache_request,method:"POST",data:{type:e},parse:!1}).then((e=>(j(!1),200<=e.status&&300>e.status?(Se(optimoleDashboardApp.strings.options_strings.cache_cleared),void console.log("%c New cache token generated.","color: #59B278")):(Se(optimoleDashboardApp.strings.options_strings.cache_cleared_error),void console.log("%c Could not generate cache token.","color: #E7602A")))))},xe=(e,t=(()=>{}))=>{L()({path:(0,k.addQueryArgs)(optimoleDashboardApp.routes.get_sample_rate,{quality:e.quality,force:e?.force||"no"}),method:"POST"}).then((e=>{"success"===e.code&&U(e.data),t&&t(e)}))},we=(e=(()=>{}))=>{L()({path:optimoleDashboardApp.routes.get_offload_conflicts,method:"GET"}).then((t=>{Y(!0),0!==t.data.length&&Q(t.data),e&&e(t)}))},Ae=e=>{const t=me();"offload_images"===e.action&&(Object.prototype.hasOwnProperty.call(t,"optimole_action")&&ae(!1),W(!0)),"rollback_images"===e.action&&(Object.prototype.hasOwnProperty.call(t,"optimole_action")&&se(!1),X(!0)),j(!0),L()({path:optimoleDashboardApp.routes.number_of_images_and_pages,method:"POST",data:{action:e.action,refresh:e.refresh||!1},parse:!1}).then((t=>{if(200<=t.status&&300>t.status)return t.json();"offload_images"===e.action&&(W(!1),j(!1)),"rollback_images"===e.action&&(X(!1),j(!1))})).then((a=>{if(!a.data.count||0===a.data.count||!1===a.data.status)return console.log("%c No images available.","color: #E7602A"),W(!1),X(!1),j(!1),0===a.data.count&&(re("disabled"),ne(a.data.action)),a.data.reached_limit&&re(a.data.reached_limit?"enabled":"disabled"),a.data.offload_limit&&ce(a.data.offload_limit),ie(),ve(ge(),!1),"offload_images"===e.action&&Object.prototype.hasOwnProperty.call(t,"optimole_action")&&ae(!0),void("rollback_images"===e.action&&Object.prototype.hasOwnProperty.call(t,"optimole_action")&&se(!0));let s=pe();e.refresh?(ee(0!==s?Math.abs(s-a.data.count):0),0!==a.data.count&&0===s&&J(a.data.count)):J(a.data.count),setTimeout((()=>{Ae({action:e.action,refresh:!0})}),1e4)})).finally((()=>{var t;t="offload_images"===e.action?"offload":"rollback",jQuery.ajax({type:"POST",url:window.ajaxurl,data:{action:"optml_fetch_logs",nonce:optimoleDashboardApp.nonce,type:t},success:e=>{le(t,e)}})})).catch((t=>{te(e.action),W(!1),X(!1)}))},Se=e=>{ue("info",e,{isDismissible:!0,type:"snackbar"})},Ne=(e,t=(()=>{}))=>{L()({path:optimoleDashboardApp.routes.dismiss_notice,method:"POST",data:{key:e}}).then((e=>{"success"===e.code?t&&t(e):Se(e?.data?.error||optimoleDashboardApp.strings.options_strings.settings_saved_error)})).catch((e=>{Se(optimoleDashboardApp.strings.options_strings.settings_saved_error)}))},De=({tab:e,setTab:t})=>{const[a,l]=(0,o.useState)(!1),{setShowDisconnect:n}=(0,c.useDispatch)("optimole"),{isConnected:r,isLoading:i,hasApplication:d,hasDashboardLoaded:p,hasConflicts:_}=(0,c.useSelect)((e=>{const{isConnected:t,isLoading:a,hasApplication:s,hasDashboardLoaded:o,getConflicts:l}=e("optimole"),n=l();return{isConnected:t(),isLoading:a(),hasApplication:s(),hasDashboardLoaded:o(),hasConflicts:0<n.count||0}}));(0,o.useEffect)((()=>{_&&l(!0)}),[_]);const f=[{label:optimoleDashboardApp.strings.dashboard_menu_item,value:"dashboard"},{label:optimoleDashboardApp.strings.conflicts_menu_item,value:"conflicts",isDisabled:!a},{label:optimoleDashboardApp.strings.settings_menu_item,value:"settings"},{label:optimoleDashboardApp.strings.help_menu_item,value:"help"}],E=r&&d&&!p;return(0,s.createElement)("header",{className:"bg-white shadow-sm px-2.5 py-5 pb-0"},(0,s.createElement)("div",{className:"flex flex-col sm:flex-row justify-between items-center max-w-screen-xl mx-auto my-0 pb-5"},(0,s.createElement)("div",{className:"items-center flex justify-start cursor-default"},(0,s.createElement)("img",{className:"max-width-64 w-16 h-16 mr-3",src:`${optimoleDashboardApp.assets_url}/img/logo.png`,alt:optimoleDashboardApp.strings.optimole+" "+optimoleDashboardApp.strings.service_details,title:optimoleDashboardApp.strings.optimole+" "+optimoleDashboardApp.strings.service_details}),(0,s.createElement)("h3",{className:"text-gray-800 text-2 font-serif font-bold"},optimoleDashboardApp.strings.optimole)),(0,s.createElement)("div",{className:"flex items-center"},r?(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.DropdownMenu,{icon:i||E?(0,s.createElement)(u.Icon,{icon:g,className:"animate-spin fill-success"}):(0,s.createElement)(u.Icon,{icon:h}),toggleProps:{className:"optml-header__dropdown uppercase font-bold text-xs text-success hover:text-success active:text-success focus:text-success mr-3 border border-gray-300 rounded-md border-solid gap-2",iconPosition:"right"},popoverProps:{className:"optml-header__dropdown__popover"},text:E?optimoleDashboardApp.strings.connecting:optimoleDashboardApp.strings.connected,controls:[{title:optimoleDashboardApp.strings.optimole+" "+optimoleDashboardApp.strings.dashboard_menu_item,onClick:()=>window.open(optimoleDashboardApp.optimoleDashHome,"_blank")},{title:optimoleDashboardApp.strings.refresh_stats_cta,onClick:fe,isDisabled:E},{title:optimoleDashboardApp.strings.disconnect_btn,onClick:()=>n(!0),isDisabled:E}]})):(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"uppercase font-bold text-xs text-danger mr-3"},optimoleDashboardApp.strings.not_connected),(0,s.createElement)(u.Icon,{icon:b})))),r&&d&&p&&(0,s.createElement)("ul",{className:"flex gap-8 items-center max-w-screen-xl mx-auto my-0 justify-center sm:justify-normal"},f.filter((e=>!e?.isDisabled)).map((({label:a,value:o})=>(0,s.createElement)("li",{key:o,className:m()("cursor-pointer text-purple-gray font-bold text-lg m-0 py-2 px-3 transition-colors duration-200 ease-in-out border-0 border-b-4 border-b-white border-solid",{"text-black !border-b-info":e===o}),onClick:()=>t(o)},a)))))},Ce=()=>{const{setShowDisconnect:e}=(0,c.useDispatch)("optimole"),{isLoading:t}=(0,c.useSelect)((e=>{const{isLoading:t}=e("optimole");return{isLoading:t()}}));return(0,s.createElement)(u.Modal,{title:optimoleDashboardApp.strings.disconnect_title,className:"optml__modal",onRequestClose:()=>e(!1)},(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.disconnect_desc}}),(0,s.createElement)("div",{className:"flex gap-2"},(0,s.createElement)(u.Button,{variant:"default",className:"optml__button flex w-full justify-center rounded font-bold mt-4 min-h-40",onClick:()=>e(!1)},optimoleDashboardApp.strings.keep_connected),(0,s.createElement)(u.Button,{isDestructive:!0,className:"optml__button flex w-full justify-center rounded font-bold mt-4 min-h-40",isBusy:t,disabled:t,onClick:_e},optimoleDashboardApp.strings.disconnect_btn)))},Le=({setMethod:e})=>{const[t,a]=(0,o.useState)(""),[l,n]=(0,o.useState)({}),[r,i]=(0,o.useState)(0),{setShowDisconnect:d}=(0,c.useDispatch)("optimole"),{availableApps:m,hasValidKey:p,isConnected:g,isConnecting:b,isLoading:h}=(0,c.useSelect)((e=>{const{getAvailableApps:t,hasValidKey:a,isConnected:s,isConnecting:o,isLoading:l}=e("optimole");return{availableApps:t(),hasValidKey:a(),isConnected:s(),isConnecting:o(),isLoading:l()}}));return(0,s.createElement)("div",{className:"text-2 font-bold m-0 text-gray-700"},(0,s.createElement)("div",{className:"text-gray-800 font-serif leading-7"},optimoleDashboardApp.strings.connect_btn),(0,s.createElement)("p",{className:"text-xl font-normal text-gray-800",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.steps_connect_api_desc}}),(0,s.createElement)("div",{className:"flex flex-col gap-8 p-8 bg-light-blue border border-blue-300 rounded-md"},(0,s.createElement)("div",{className:"flex flex-col sm:flex-row gap-8 items-stretch sm:items-end"},(0,s.createElement)(u.TextControl,{label:g?optimoleDashboardApp.strings.your_api_key:optimoleDashboardApp.strings.add_api,placeholder:optimoleDashboardApp.strings.email,disabled:g,value:t,onChange:a,className:"optml__input basis-4/5"}),g?(0,s.createElement)(u.Button,{variant:"default",isBusy:h,disabled:h,className:"optml__button flex w-full justify-center rounded font-bold min-h-40 basis-1/5",onClick:d},optimoleDashboardApp.strings.disconnect_btn):(0,s.createElement)(u.Button,{variant:"primary",isBusy:b,disabled:b||0===t.length,className:"optml__button flex w-full justify-center rounded font-bold min-h-40 basis-1/5",onClick:()=>{n({}),((e,t=(()=>{}))=>{z(!0),j(!0),B(!1),L()({path:optimoleDashboardApp.routes.connect,method:"POST",data:e,parse:!1}).then((e=>e.json())).then((e=>(z(!1),j(!1),"success"===e.code?(M(!0),R(!0),F(e.data.api_key),void 0!==e.data.app_count&&1<e.data.app_count?q(e.data):(H(!0),P(e.data)),be(),O(!0),console.log("%c OptiMole API connection successful.","color: #59B278")):(R(!1),console.log("%c Invalid API Key.","color: #E7602A")),t&&t(e),e.data))).catch((e=>(z(!1),j(!1),B(!0),e.data)))})({api_key:t},(e=>{"success"!==e.code&&n({error_connect:e.data})}))}},optimoleDashboardApp.strings.connect_btn)),m&&(0,s.createElement)("div",{className:"flex flex-col sm:flex-row gap-8 items-stretch sm:items-end"},(0,s.createElement)("div",{className:"basis-4/5"},(0,s.createElement)(u.SelectControl,{label:optimoleDashboardApp.strings.select+" "+optimoleDashboardApp.strings.your_domain,value:r,options:m.available_apps.map(((e,t)=>({label:e.domain,value:t}))),onChange:i,className:"optml__select has_large_title",__nextHasNoMarginBottom:!0})),(0,s.createElement)(u.Button,{variant:"primary",isBusy:b,disabled:b,className:"optml__button flex w-full justify-center rounded font-bold min-h-40 basis-1/5",onClick:()=>{((e,t=(()=>{}))=>{z(!0),B(!1),L()({path:optimoleDashboardApp.routes.select_application,method:"POST",data:e}).then((e=>{z(!1),j(!1),"success"===e.code?(R(!0),H(!0),F(e.data.api_key),P(e.data),q(e.data),console.log("%c OptiMole API connection successful.","color: #59B278")):(R(!1),console.log("%c Invalid API Key.","color: #E7602A")),t&&t(e)})).catch((e=>(z(!1),B(!0),e.data)))})({api_key:t,application:null!=m&&void 0!==m.available_apps?m.available_apps[r].key:""},(e=>{"success"!==e.code&&n({error_connect:e.data})}))}},optimoleDashboardApp.strings.select))),!p&&void 0!==l.error_connect&&(0,s.createElement)("p",{className:"block text-xs mt-1 text-danger",dangerouslySetInnerHTML:{__html:l.error_connect}}),(0,s.createElement)("div",{className:"text-center py-3"},(0,s.createElement)(u.Button,{variant:"link",onClick:()=>e("email")},optimoleDashboardApp.strings.back_to_connect)))},ke="optml-connect flex flex-col justify-between max-w-screen-xl mt-8 mb-5 mx-auto p-0 transition-all ease-in-out duration-700 relative bg-white text-gray-700 border-0 rounded-lg shadow-md",Te="flex gap-8 p-8 flex-col md:flex-row",Ie=()=>(0,s.createElement)("div",{className:"bg-danger text-white rounded relative px-6 py-5 mb-0 m-12",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.notice_api_not_working}}),Oe=()=>{const[e,t]=(0,o.useState)(optimoleDashboardApp.current_user.email),[a,l]=(0,o.useState)("email"),[n,r]=(0,o.useState)({}),{setAutoConnect:i}=(0,c.useDispatch)("optimole"),{autoConnect:d,hasRestError:m,isConnecting:p}=(0,c.useSelect)((e=>{const{getAutoConnect:t,hasRestError:a,isConnecting:s}=e("optimole");return{autoConnect:t(),hasRestError:a(),isConnecting:s()}}));return(0,o.useEffect)((()=>{"no"!==d&&he({email:d,auto_connect:!0},(e=>{i("no"),"email_registered"!==e.code?"site_exists"!==e.code?"success"!==e.code&&e.message&&r({error_autoconnect:e.message}):r({site_exists:e.message}):r({email_registered:e.message})}))}),[]),(0,o.useEffect)((()=>{(0===e.length||(0,k.isEmail)(e))&&n.invalid_email&&(delete n.invalid_email,r(n))}),[e]),"key"===a?(0,s.createElement)("div",{className:ke},m&&(0,s.createElement)(Ie,null),(0,s.createElement)("div",{className:Te},(0,s.createElement)(Le,{setMethod:l}))):(0,s.createElement)("div",{className:ke},m&&(0,s.createElement)(Ie,null),(0,s.createElement)("div",{className:Te},(0,s.createElement)("div",{className:"optml-connect__content basis-8/12"},(0,s.createElement)("div",{className:"inline-block bg-light-blue text-gray-500 text-sm font-medium px-4 py-1.5 rounded-full mb-4"},optimoleDashboardApp.strings.account_needed_trust_badge),(0,s.createElement)("div",{className:"text-gray-700 font-serif text-2xl font-bold leading-7 m-0"},optimoleDashboardApp.strings.account_needed_heading),(0,s.createElement)("p",{className:"text-base font-normal text-gray-500",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.account_needed_sub_heading}}),(0,s.createElement)("div",{className:"inline-flex items-center bg-light-blue px-4 py-1.5 rounded-full mb-5 text-sm text-gray-800"},(0,s.createElement)("span",{className:"mr-2"},"⏱️"),optimoleDashboardApp.strings.account_needed_setup_time),(0,s.createElement)("p",{className:"text-sm text-gray-700 mb-5 leading-normal",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.account_needed_title}}),(0,s.createElement)("div",{className:"flex py-3 items-center"},(0,s.createElement)(u.Icon,{icon:"yes-alt"}),(0,s.createElement)("p",{className:"text-base ml-3 m-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.account_needed_subtitle_1}})),(0,s.createElement)("div",{className:"flex py-3 items-center"},(0,s.createElement)(u.Icon,{icon:"yes-alt"}),(0,s.createElement)("p",{className:"text-base ml-3 m-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.account_needed_subtitle_2}})),(0,s.createElement)("div",{className:"flex py-3 items-center"},(0,s.createElement)(u.Icon,{icon:"yes-alt"}),(0,s.createElement)("p",{className:"text-base ml-3 m-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.account_needed_subtitle_4}}))),(0,s.createElement)("div",{className:"optml-connect__form basis-4/12 p-8 bg-light-blue border border-blue-300 rounded-md"},(0,s.createElement)(u.TextControl,{label:optimoleDashboardApp.strings.email_address_label,placeholder:optimoleDashboardApp.strings.email,value:e,onChange:t,className:"optml__input",onBlur:()=>{0===e.length||(0,k.isEmail)(e)||r({invalid_email:optimoleDashboardApp.strings.invalid_email})}}),0<Object.keys(n).length&&Object.keys(n).map((e=>(0,s.createElement)("p",{key:e,className:"block text-xs mt-1 text-danger",dangerouslySetInnerHTML:{__html:n[e]}})))||(0,s.createElement)("br",null),(0,s.createElement)(u.Button,{variant:"primary",isBusy:p,disabled:p||0===e.length||!(0,k.isEmail)(e),className:"optml__button flex w-full justify-center rounded font-bold min-h-40",onClick:()=>{r({}),he({email:e},(e=>{"email_registered"!==e.code?"site_exists"!==e.code?"domain_not_accessible"!==e.code?"success"!==e.code&&r({error_register:e.message}):r({domain_not_accessible:e.message}):r({site_exists:e.message}):r({email_registered:e.message})}))}},optimoleDashboardApp.strings.register_btn),(0,s.createElement)("br",null),(0,s.createElement)("br",null),(0,s.createElement)("div",{className:"base-control-label"},optimoleDashboardApp.strings.existing_user),(0,s.createElement)(u.Button,{variant:"secondary",className:"optml__button flex w-full justify-center rounded font-bold mt-4 min-h-40 mb-4",onClick:()=>l("key")},optimoleDashboardApp.strings.api_exists),(0,s.createElement)("div",{class:"flex items-center justify-center text-gray-600 mb-4"},(0,s.createElement)("span",{class:"mr-1.5"},"🔒"),optimoleDashboardApp.strings.secure_connection),(0,s.createElement)("p",{className:"mb-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.signup_terms}}))))},Me=({value:e,max:t=100,className:a,colorOverage:o=!1,...l})=>{const n=Math.round(e/t*100),r=(l.background,m()("w-full h-2.5 border rounded-md border-solid bg-white border-light-gray relative overflow-hidden",a)),i=m()("absolute left-0 h-full",{"bg-info":!o||70>n,"bg-red-500":o&&100<n,"bg-amber-500":o&&70<n&&100>n});return(0,s.createElement)("div",{className:r,role:"progressbar","aria-valuemin":"0","aria-valuemax":t,"aria-valuenow":e,...l},(0,s.createElement)("div",{className:i,style:{width:`${n}%`}}))},ze=[optimoleDashboardApp.strings.options_strings.connect_step_0,optimoleDashboardApp.strings.options_strings.connect_step_1,optimoleDashboardApp.strings.options_strings.connect_step_2,optimoleDashboardApp.strings.options_strings.connect_step_3],je=()=>{const[e,t]=(0,o.useState)(0),[a,l]=(0,o.useState)(0),[n,r]=(0,o.useState)(0),{sethasDashboardLoaded:i}=(0,c.useDispatch)("optimole");(0,o.useEffect)((()=>{if(n<=5){const e=setTimeout((()=>{d()}),1e3);return()=>{e&&clearTimeout(e)}}}),[n]);const d=()=>{if(r(n+1),n>=5)return i(!0),r(0),l(0),void t(0);t(Math.floor(n/5*100)),e>30*(a+1)&&l(a+1)};return(0,s.createElement)("div",{className:"optml-connecting flex flex-col justify-between max-w-screen-xl mt-8 mb-5 mx-auto p-0 transition-all ease-in-out duration-700 relative bg-white text-gray-700 border-0 rounded-lg shadow-md"},(0,s.createElement)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-5 px-8 sm:px-0 py-24"},(0,s.createElement)("img",{className:"max-w-full",src:optimoleDashboardApp.assets_url+"img/connecting.png"}),(0,s.createElement)("div",{className:"text-center md:text-left"},(0,s.createElement)("div",{className:"font-bold text-2xl"},optimoleDashboardApp.strings.account_connecting_title),(0,s.createElement)("div",{className:"text-base"},optimoleDashboardApp.strings.account_connecting_subtitle),(0,s.createElement)(Me,{className:"mt-2.5 mb-1.5 mx-0 h-5 border-gray-200",value:n,max:5,background:"#e6e6e6"}),(0,s.createElement)("div",{className:"text-xs"},ze[a]+" ("+e+"%)"))))},Be=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,s.createElement)(p.Path,{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"})),Re=function(){const[e,t]=(0,s.useState)(null),[a,o]=(0,s.useState)({width:0,height:0}),l=(0,s.useCallback)((()=>{o({width:(null==e?void 0:e.offsetWidth)||0,height:(null==e?void 0:e.offsetHeight)||0})}),[null==e?void 0:e.offsetHeight,null==e?void 0:e.offsetWidth]);return He("resize",l),Fe((()=>{l()}),[null==e?void 0:e.offsetHeight,null==e?void 0:e.offsetWidth]),[t,a]},He=function(e,t,a,o){const l=(0,s.useRef)(t);Fe((()=>{l.current=t}),[t]),(0,s.useEffect)((()=>{var t;const s=null!==(t=null==a?void 0:a.current)&&void 0!==t?t:window;if(!s||!s.addEventListener)return;const n=e=>l.current(e);return s.addEventListener(e,n,o),()=>{s.removeEventListener(e,n,o)}}),[e,a,o])},Fe="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,Pe="yes"!==optimoleDashboardApp.connection_status,qe=({src:e,oldSize:t,newSize:a})=>{const[o,{width:l}]=Re();return(0,s.createElement)("div",{className:"basis-1/4"},(0,s.createElement)("img",{src:e,className:"w-full border border-slate-200 rounded-md border-solid",style:{height:l},ref:o}),(0,s.createElement)("p",{className:"optml__bullet w-full h-4"},(()=>{let e=(100*(1-a/t)).toFixed(1);return 1>e?"1":100<e?(Math.floor(e/10+10)/10).toFixed(1).toString():e.toString()})(),"% ",optimoleDashboardApp.strings.latest_images.saved," "))},Ve=()=>{const[e,{width:t}]=Re();return(0,s.createElement)("div",{className:"basis-1/4"},(0,s.createElement)("div",{className:"optml__loader w-full rounded-md",style:{height:t},ref:e}),(0,s.createElement)("p",{className:"optml__loader w-full h-4"}))},Ge=()=>{const[e,t]=(0,o.useState)(!1),[a,l]=(0,o.useState)(0),[n,r]=(0,o.useState)(0),[i,d]=(0,o.useState)(0);(0,o.useEffect)((()=>{i<=20&&setTimeout((()=>{p()}),1e3)}),[i]);const{images:m}=(0,c.useSelect)((e=>{const{getOptimizedImages:t}=e("optimole");return{images:t()||[]}}));(0,o.useEffect)((()=>{8<=m.length?t(!0):e||Pe||Ee((()=>{t(!0)}))}),[]);const p=()=>{d(i+1),i>=20?Ee((()=>{t(!0),d(0),r(0),l(0),fe()})):(l(Math.floor(i/20*100)),a>30*(n+1)&&r(n+1))};return(0,s.createElement)("div",null,(0,s.createElement)("h3",{className:"text-gray-800 text-xl font-semibold mb-5 m-0"},optimoleDashboardApp.strings.latest_images.last," ",optimoleDashboardApp.strings.latest_images.optimized_images),Pe&&!e&&(0,s.createElement)("div",{className:"flex items-center flex-col py-2"},(0,s.createElement)("p",{className:"font-semibold"},optimoleDashboardApp.strings.latest_images.loading_latest_images),(0,s.createElement)(Me,{max:20,value:i})),!Pe&&!e&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"flex justify-between mt-5 gap-5"},[...Array(4)].map((()=>(0,s.createElement)(Ve,null)))),(0,s.createElement)("div",{className:"flex justify-between mt-5 gap-5"},[...Array(4)].map((()=>(0,s.createElement)(Ve,null))))),e&&4>m?.length&&(0,s.createElement)("div",{className:"text-center py-12"},(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.latest_images.no_images_found}})),e&&4<=m?.length&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"flex justify-between mt-5 gap-5"},[...Array(4)].map(((e,t)=>(0,s.createElement)(qe,{src:m[t].url,oldSize:m[t].ex_size_raw,newSize:m[t].new_size_raw})))),8<=m?.length&&(0,s.createElement)("div",{className:"flex justify-between mt-5 gap-5"},[...Array(4)].map(((e,t)=>(t+=4,(0,s.createElement)(qe,{src:m[t].url,oldSize:m[t].ex_size_raw,newSize:m[t].new_size_raw})))))))},$e=[{label:optimoleDashboardApp.strings.metrics.metricsTitle2,description:optimoleDashboardApp.strings.metrics.metricsSubtitle2,value:"saved_size"},{label:optimoleDashboardApp.strings.metrics.metricsTitle3,description:optimoleDashboardApp.strings.metrics.metricsSubtitle3,value:"compression_percentage"},{label:optimoleDashboardApp.strings.metrics.metricsTitle4,description:optimoleDashboardApp.strings.metrics.metricsSubtitle4,value:"traffic"}],Ke=e=>{const t=window.optimoleDashboardApp.submenu_links.find((e=>"#settings"===e.hash));t&&(document.querySelector(`a[href="${t.href}"]`).click(),setTimeout((()=>{const t=document.querySelectorAll(".optml-settings ul li");t[e]?.querySelector("button").click(),window.scrollTo(0,0)}),500))},Ze=[{icon:x,title:optimoleDashboardApp.strings.quick_actions.speed_test_title,description:optimoleDashboardApp.strings.quick_actions.speed_test_desc,link:optimoleDashboardApp.strings.quick_actions.speed_test_link,value:"speedTest"},{icon:w,title:optimoleDashboardApp.strings.quick_actions.clear_cache_images,description:optimoleDashboardApp.strings.quick_actions.clear_cache,value:ye},{icon:A,title:optimoleDashboardApp.strings.quick_actions.offload_images,description:optimoleDashboardApp.strings.quick_actions.offload_images_desc,value:()=>Ke(1)},{icon:S,title:optimoleDashboardApp.strings.quick_actions.advance_settings,description:optimoleDashboardApp.strings.quick_actions.configure_settings,value:()=>Ke(2)}],Ue=()=>(0,s.createElement)("div",{className:"flex gap-2 bg-warning text-danger border border-solid border-danger rounded relative px-6 py-5 mb-5"},(0,s.createElement)(u.Icon,{className:"fill-current",icon:Be}),(0,s.createElement)("p",{className:"m-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.notice_disabled_account}})),Ye=()=>(0,s.createElement)("div",{className:"flex gap-2 bg-success text-white rounded relative px-6 py-5 mb-5"},(0,s.createElement)(u.Icon,{icon:"cloud-saved"}),(0,s.createElement)("p",{className:"m-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.notice_just_activated}})),Qe=()=>{const{userData:e,userStatus:t}=(0,c.useSelect)((e=>{const{getUserData:t,getUserStatus:a}=e("optimole");return{userData:t(),userStatus:a()}})),a=(e.visitors/e.visitors_limit*100).toFixed(0);return(0,s.createElement)("div",{className:"grid gap-5"},(0,s.createElement)("div",{className:"bg-white p-8 border-0 rounded-lg shadow-md"},0<optimoleDashboardApp.strings.notice_just_activated.length&&"active"===t&&(0,s.createElement)(Ye,null),"inactive"===t&&(0,s.createElement)(Ue,null),(0,s.createElement)("div",{className:"pb-6 gap-6 flex-col sm:flex-row items-start"},(0,s.createElement)("div",{className:"flex flex-col md:flex-row gap-3 w-full justify-between"},(0,s.createElement)("div",{className:"text-gray-800 text-xl font-semibold"},optimoleDashboardApp.strings.dashboard_title),(0,s.createElement)("div",{className:"flex items-center gap-2"},(0,s.createElement)("div",{className:"text-gray-600 text-base"},optimoleDashboardApp.strings.quota,(0,s.createElement)("span",{className:"pl-2 text-gray-800 font-bold"},e.visitors_pretty," / ",e.visitors_limit_pretty)),(0,s.createElement)("div",{className:"md:w-20 grow md:grow-0"},(0,s.createElement)(Me,{value:e.visitors,max:e.visitors_limit})),(0,s.createElement)("span",null,a,"%")))),(0,s.createElement)("div",{className:m()("flex p-6 bg-light-blue border border-blue-300 rounded-md","gap-8 flex-col sm:flex-row items-start sm:items-center")},(0,s.createElement)("div",{className:"grid gap-2"},(0,s.createElement)("div",{className:"text-gray-700 text-lg font-semibold"},optimoleDashboardApp.strings.banner_title),(0,s.createElement)("div",{className:"text-gray-600 text-sm"},optimoleDashboardApp.strings.banner_description))),(0,s.createElement)("div",{className:"flex pt-5 gap-5 flex-col md:flex-row"},$e.map((t=>{const a=e[t.value],{formattedValue:o,unit:l}=((e,t)=>{let a=0,s="";switch(void 0===t&&(t="saved_size"===e?Math.floor(25e5*Math.random())+5e5:"traffic"===e?Math.floor(2500*Math.random())+500:Math.floor(40*Math.random())+10),e){case"compression_percentage":a=parseFloat(t).toFixed(2),s="%";break;case"saved_size":const e=t/1e3;1e3>e?(a=e.toFixed(2),s="MB"):1e6>e?(a=(e/1e3).toFixed(2),s="GB"):(a=(e/1e6).toFixed(2),s="TB");break;case"traffic":1e3>t?(a=parseFloat(t).toFixed(2),s="MB"):1e6>t?(a=(t/1e3).toFixed(2),s="GB"):(a=(t/1e6).toFixed(2),s="TB");break;default:a=parseFloat(t).toFixed(2),s=""}return{formattedValue:a,unit:s}})(t.value,a);return(0,s.createElement)("div",{key:t.value,className:m()("p-3 basis-1/3 flex-col items-start border rounded-md border-solid bg-white border-gray-300")},(0,s.createElement)("div",{className:"flex w-full flex-col"},(0,s.createElement)("div",{className:"text-sm text-gray-500"},t.label),(0,s.createElement)("div",{className:"flex items-end gap-1"},(0,s.createElement)("span",{className:"text-2xl text-black font-bold"},o),(0,s.createElement)("span",{className:"text-sm text-gray-500"},l)),(0,s.createElement)("div",{className:"font-normal text-gray-600"},t.description)))})))),(0,s.createElement)("div",{className:"bg-white p-8 border-0 rounded-lg shadow-md"},(0,s.createElement)("div",{className:"text-gray-800 text-xl font-semibold mb-5"},optimoleDashboardApp.strings.quick_action_title),(0,s.createElement)("div",{className:"grid md:grid-cols-2 gap-5"},Ze.map(((e,t)=>{const a="speedTest"===e.value?"a":"button",o="speedTest"===e.value?{href:e.link,target:"_blank"}:{onClick:()=>{e.value()}};return(0,s.createElement)(a,{key:t,className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-light-blue hover:bg-info hover:border-info transition-background duration-300 group shadow-none border-gray-200 border border-solid cursor-pointer",...o},(0,s.createElement)(u.Icon,{icon:e.icon,className:"text-info"}),(0,s.createElement)("div",{className:"flex flex-col items-start gap-1"},(0,s.createElement)("span",{className:"font-medium text-base text-gray-800"},e.title),(0,s.createElement)("span",{className:"text-info text-sm font-medium hover:text-info"},e.description)))})))),(0,s.createElement)("div",{className:"bg-white p-8 border-0 rounded-lg shadow-md hidden lg:block"},"yes"!==optimoleDashboardApp.remove_latest_images&&(0,s.createElement)(Ge,null)))},We=({conflict:e})=>{const[t,a]=(0,o.useState)(!1);return(0,s.createElement)("div",{className:m()("flex gap-2 text-white rounded relative px-6 py-5 mb-5",{"bg-danger":"high"===e.severity,"bg-info":"medium"===e.severity,"bg-success":"high"!==e.severity&&"medium"!==e.severity})},(0,s.createElement)("p",{className:"m-0 text-white",dangerouslySetInnerHTML:{__html:e.message}}),(0,s.createElement)(u.Button,{icon:t?g:"no-alt",label:optimoleDashboardApp.strings.conflicts.conflict_close,disabled:t,className:m()("text-white hover:text-white",{"animate-spin":t}),onClick:()=>{a(!0),((e,t=(()=>{}))=>{j(!0),L()({path:optimoleDashboardApp.routes.dismiss_conflict,method:"POST",data:{conflictID:e}}).then((e=>{j(!1),"success"===e.code&&$(e.data),t&&t(e)}))})(e.id,(()=>{a(!1)}))}}))},Xe=()=>{const{conflicts:e}=(0,c.useSelect)((e=>{const{getConflicts:t}=e("optimole");return{conflicts:t().conflicts||[]}}));return(0,s.createElement)("div",{className:"bg-white p-8 border-0 rounded-lg shadow-md"},Boolean(e.length)&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",null,optimoleDashboardApp.strings.conflicts.title),e.map((e=>(0,s.createElement)(We,{key:e.id,conflict:e})))),!Boolean(e.length)&&(0,s.createElement)("div",{className:"text-center py-12"},(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.conflicts.no_conflicts_found}})))},Je=(0,s.createElement)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)(p.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),et=(0,s.createElement)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)(p.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),{strings:tt}=optimoleDashboardApp,at=[{label:tt.general_settings_menu_item,value:"general"},{label:tt.image_storage,value:"offload_media"},{label:tt.advanced_settings_menu_item,value:"compression",children:[{label:tt.settings_compression_menu_item,value:"compression"},{label:tt.settings_resize_menu_item,value:"resize"},{label:tt.lazyload_settings_menu_item,value:"lazyload"},{label:tt.settings_exclusions_menu_item,value:"exclusions"}]},{label:tt.cloud_library,value:"cloud_library"}],st=({children:e,tab:t,settings:a,setTab:o})=>(0,s.createElement)("ul",{className:"flex flex-col gap-1 m-0 mt-1"},e.map((e=>{const{value:l,label:n}=e;if("lazyload"===e.value&&"disabled"===a.lazyload)return;const r=m()({"bg-light-blue hover:text-purple-gray":t===l,"bg-transparent hover:text-info":t!==l},"w-full text-left border-0 font-normal text-base text-purple-gray cursor-pointer rounded px-4 py-2 m-0 hover:text-info");return(0,s.createElement)("li",{key:l},(0,s.createElement)("button",{className:r,onClick:()=>o(l)},n))}))),ot=({tab:e,settings:t,setTab:a})=>(0,s.createElement)("div",{className:"basis-1/5"},(0,s.createElement)("ul",{className:"grid m-0 gap-1"},at.map((o=>{const l="enabled"!==t?.image_replacer&&"general"!==o.value,n=e===o.value||o.children&&o.children.some((t=>t.value===e)),r=m()({"!text-info":n},{"opacity-50 pointer-events-none":l},"w-full bg-transparent border-0 flex items-center appearance-none not-italic font-semibold text-base text-purple-gray cursor-pointer hover:text-info py-2");return(0,s.createElement)("li",{key:o.value,className:"m-0"},(0,s.createElement)("button",{disabled:l,className:r,onClick:()=>a(o.value)},o.label,o.children&&(0,s.createElement)(u.Icon,{icon:n?Je:et,className:"inline-block ml-2 fill-current"})),o.children&&n&&(0,s.createElement)(st,{children:o.children,tab:e,settings:t,setTab:a}))})))),lt=(0,o.forwardRef)((function({icon:e,size:t=24,...a},s){return(0,o.cloneElement)(e,{width:t,height:t,...a,ref:s})})),nt=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),rt=(0,s.createElement)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)(p.Path,{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM15.5303 8.46967C15.8232 8.76256 15.8232 9.23744 15.5303 9.53033L13.0607 12L15.5303 14.4697C15.8232 14.7626 15.8232 15.2374 15.5303 15.5303C15.2374 15.8232 14.7626 15.8232 14.4697 15.5303L12 13.0607L9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303C8.17678 15.2374 8.17678 14.7626 8.46967 14.4697L10.9393 12L8.46967 9.53033C8.17678 9.23744 8.17678 8.76256 8.46967 8.46967C8.76256 8.17678 9.23744 8.17678 9.53033 8.46967L12 10.9393L14.4697 8.46967C14.7626 8.17678 15.2374 8.17678 15.5303 8.46967Z"})),it=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),ct=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));function dt({text:e,title:t,disableIcon:a=!1,type:o="info",className:l="",smallTitle:n=!1,children:r,onDismiss:i}){const c=m()({"bg-yellow-50 text-yellow-700":"warning"===o,"bg-green-50 text-green-700":"success"===o,"bg-red-50 text-red-700":"error"===o,"bg-blue-50 text-blue-700":"info"===o,"bg-info text-white":"primary"===o},`rounded-md my-5 text-sm p-4 om-notice om-notice-${o} relative`),d=m()({"fill-yellow-500":"warning"===o,"fill-green-500":"success"===o,"fill-red-500":"error"===o,"fill-blue-500":"info"===o,"fill-white":"primary"===o,"h-6 w-6":"primary"!==o,"h-12 w-12":"primary"===o}),p=m()({"ml-3 mt-0.5":!a&&!t,"mt-2 mx-1.5":t}),g=m()({"text-yellow-800":"warning"===o,"text-green-800":"success"===o,"text-red-800":"error"===o,"text-blue-800":"info"===o,"font-bold text-base":"primary"!==o,"text-white text-sm":"primary"===o,"text-s":n},"m-0"),u={warning:Be,success:nt,error:rt,info:it,primary:f};return(0,s.createElement)("div",{className:c},i&&(0,s.createElement)("button",{className:"flex items-center justify-center absolute bg-transparent text-current right-1 top-1 border-0 rounded-full p-0 cursor-pointer hover:bg-white transition-all hover:text-info",onClick:i},(0,s.createElement)(lt,{className:"fill-current",icon:ct})),(0,s.createElement)("div",{className:t?"grid":"flex"},(0,s.createElement)("div",{className:m()("flex-shrink-0 flex gap-2",{"items-center":t})},!a&&(0,s.createElement)(lt,{icon:u[o]||null,className:d}),t&&(0,s.createElement)("div",{className:g,dangerouslySetInnerHTML:{__html:t}})),r||e&&(0,s.createElement)("div",{className:p},e&&(0,s.createElement)("p",{className:"m-0",dangerouslySetInnerHTML:{__html:e}}),r)))}const mt=({settings:e,setSettings:t,setCanSave:a})=>{const{isLoading:l,isUserActive:n}=(0,c.useSelect)((e=>{const{isLoading:t,getUserStatus:a}=e("optimole");return{isLoading:t(),isUserActive:"active"===a()}})),r="disabled"!==e.image_replacer,i="disabled"!==e.lazyload,d="disabled"!==e.cdn,p="disabled"!==e.banner_frontend,g="disabled"!==e.show_badge_icon,b=e.badge_position||"right",[h,_]=(0,o.useState)(p),f=(s,o)=>{a(!0);const l={...e};l[s]="badge_position"===s?o:o?"enabled":"disabled",t(l)};return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_image_replace,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.replacer_desc}}),checked:r,disabled:l,className:m()({"is-disabled":l}),onChange:e=>f("image_replacer",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.toggle_lazyload,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.lazyload_desc}}),checked:i,disabled:!r||l,className:m()({"is-disabled":!r||l}),onChange:e=>f("lazyload",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),n&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_badge_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_badge_description}}),checked:p,disabled:l,className:m()({"is-disabled":l}),onChange:e=>{f("banner_frontend",e),_(e)}}),p&&(0,s.createElement)("div",{className:"mt-4 badge-settings"},(0,s.createElement)(u.Button,{className:m()("border border-none bg-transparent text-blue-500 px-2 py-1 rounded-sm flex items-center cursor-pointer",{"is-disabled":l}),onClick:()=>_(!h)},(0,s.createElement)("span",null,optimoleDashboardApp.strings.options_strings.enable_badge_settings),(0,s.createElement)(lt,{icon:h?Je:et,className:"h-5 w-5",style:{fill:"#3b82f6"}})),h&&(0,s.createElement)("div",{class:"mt-4 space-y-4 pl-4 pt-2"},(0,s.createElement)("div",{class:"flex items-center justify-between mb-4"},(0,s.createElement)("label",{class:"text-gray-600 font-medium"},optimoleDashboardApp.strings.options_strings.enable_badge_show_icon),(0,s.createElement)(u.ToggleControl,{label:"",checked:g,disabled:l,className:m()("flex items-center justify-between mb-4",{"is-disabled":l}),onChange:e=>f("show_badge_icon",e)})),(0,s.createElement)("div",{class:"flex items-center justify-between"},(0,s.createElement)("label",{class:"text-gray-600 font-medium"},optimoleDashboardApp.strings.options_strings.enable_badge_position),(0,s.createElement)("div",{class:"flex space-x-2"},(0,s.createElement)(u.Button,{className:m()("px-4 py-2 border rounded border-[1px]","left"===b?"border-blue-500 text-blue-500 bg-blue-100":"border-gray-300 text-gray-500 bg-gray-100",{"is-disabled":l}),onClick:()=>f("badge_position","left")},optimoleDashboardApp.strings.options_strings.badge_position_text_1),(0,s.createElement)(u.Button,{className:m()("px-4 py-2 border rounded","right"===b?"border-blue-500 text-blue-500 bg-blue-100":"border-gray-300 text-gray-500 bg-gray-100",{"is-disabled":l}),onClick:()=>f("badge_position","right")},optimoleDashboardApp.strings.options_strings.badge_position_text_2))))),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"})),(0,s.createElement)(u.BaseControl,{label:optimoleDashboardApp.strings.options_strings.cache_title,className:m()({"is-disabled":l||!r})},(0,s.createElement)("p",{className:"components-base-control__help m-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.cache_desc}}),(0,s.createElement)("div",{className:"flex my-4 gap-3"},(0,s.createElement)(u.Button,{variant:"default",isBusy:l,disabled:l||!r,className:"optml__button flex justify-center rounded font-bold min-h-40",onClick:()=>ye()},optimoleDashboardApp.strings.options_strings.clear_cache_images),d&&(0,s.createElement)(u.Button,{variant:"default",isBusy:l,disabled:l||!r,className:"optml__button flex justify-center rounded font-bold min-h-40",onClick:()=>ye("assets")},optimoleDashboardApp.strings.options_strings.clear_cache_assets))),(0,s.createElement)(dt,{type:"warning",text:optimoleDashboardApp.strings.options_strings.clear_cache_notice,disableIcon:!0}))};var pt=a(864),gt=a.n(pt);const ut=({settings:e,setSettings:t,setCanSave:a,showSample:o,isSampleLoading:l,setIsSampleLoading:n})=>{const{sampleImages:r,isLoading:i}=(0,c.useSelect)((e=>{const{getSampleRate:t,isLoading:a}=e("optimole");return{sampleImages:t(),isLoading:a()}})),d="disabled"!==e.network_optimization,p="disabled"!==e.cdn,b="disabled"!==e.avif,h="disabled"!==e.strip_metadata,_="disabled"!==e.autoquality,f="disabled"!==e.best_format,E=e.compression_mode,v="disabled"!==e.retina_images,y=(s,o)=>{a(!0);const l={...e};l[s]=o?"enabled":"disabled",t(l)},x=()=>r.optimized_size>r.original_size?Math.floor(60*Math.random())+10:(100*parseFloat(r.optimized_size/r.original_size)).toFixed(0);let w={};return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.__experimentalToggleGroupControl,{className:" w-4/6","aria-label":optimoleDashboardApp.strings.options_strings.compression_mode,onChange:s=>(s=>{"custom"===E&&"custom"!==s&&(w={best_format:"enabled"===e.best_format,retina_images:"enabled"===e.retina_images,network_optimization:"enabled"===e.network_optimization,avif:"enabled"===e.avif,strip_metadata:"enabled"===e.strip_metadata,autoquality:"enabled"===e.autoquality}),a(!0);const o={...e};var l,n,r,i,c,m;"speed_optimized"===s&&(o.best_format="disabled",o.retina_images="disabled",o.network_optimization="enabled",o.avif="mauto",o.autoquality="enabled",o.strip_metadata="enabled"),"quality_optimized"===s&&(o.best_format="enabled",o.retina_images="enabled",o.network_optimization="disabled",o.avif="enabled",o.autoquality="enabled",o.strip_metadata="enabled"),"custom"===s&&(o.best_format=(null!==(l=w.best_format)&&void 0!==l?l:f)?"enabled":"disabled",o.retina_images=(null!==(n=w.retina_images)&&void 0!==n?n:v)?"enabled":"disabled",o.network_optimization=(null!==(r=w.network_optimization)&&void 0!==r?r:d)?"enabled":"disabled",o.avif=(null!==(i=w.avif)&&void 0!==i?i:b)?"enabled":"disabled",o.autoquality=(null!==(c=w.autoquality)&&void 0!==c?c:_)?"enabled":"disabled",o.strip_metadata=(null!==(m=w.strip_metadata)&&void 0!==m?m:h)?"enabled":"disabled"),o.compression_mode=s,t(o)})(s),value:E,label:(0,s.createElement)("div",{className:"mb-4"},(0,s.createElement)("strong",null,optimoleDashboardApp.strings.options_strings.compression_mode))},(0,s.createElement)(u.__experimentalToggleGroupControlOption,{className:"bg-blue-500",label:optimoleDashboardApp.strings.options_strings.compression_mode_speed_optimized,value:"speed_optimized"}),(0,s.createElement)(u.__experimentalToggleGroupControlOption,{label:optimoleDashboardApp.strings.options_strings.compression_mode_quality_optimized,value:"quality_optimized"}),(0,s.createElement)(u.__experimentalToggleGroupControlOption,{label:optimoleDashboardApp.strings.options_strings.compression_mode_custom,value:"custom"})),"speed_optimized"===E&&(0,s.createElement)("p",{className:"text-sm text-gray-600 mb-20"},optimoleDashboardApp.strings.options_strings.compression_mode_speed_optimized_desc),"quality_optimized"===E&&(0,s.createElement)("p",{className:"text-sm text-gray-600 mb-20"},optimoleDashboardApp.strings.options_strings.compression_mode_quality_optimized_desc),"custom"===E&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",{className:"text-sm text-gray-600 mb-10"},optimoleDashboardApp.strings.options_strings.compression_mode_custom_desc)),"custom"===E&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.best_format_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.best_format_desc}}),checked:f,disabled:i,className:m()({"is-disabled":i}),onChange:e=>y("best_format",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_retina_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_retina_desc}}),checked:v,disabled:i,className:m()({"is-disabled":i}),onChange:e=>y("retina_images",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_network_opt_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_network_opt_desc}}),checked:d,disabled:i,className:m()({"is-disabled":i}),onChange:e=>y("network_optimization",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.toggle_cdn,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.cdn_desc}}),checked:p,disabled:i,className:m()({"is-disabled":i}),onChange:e=>y("cdn",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_avif_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_avif_desc}}),checked:b,disabled:i,className:m()({"is-disabled":i}),onChange:e=>y("avif",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.strip_meta_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.strip_meta_desc}}),checked:h,disabled:i,className:m()({"is-disabled":i}),onChange:e=>y("strip_metadata",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.BaseControl,{help:!_&&optimoleDashboardApp.strings.options_strings.quality_desc},(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.quality_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.ml_quality_desc}}),checked:_,disabled:i,className:m()({"is-disabled":i}),onChange:e=>y("autoquality",e)})),!_&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.RangeControl,{value:(A=e.quality,"number"==typeof A?A:"auto"===A||"high_c"===A?90:"medium_c"===A?75:"low_c"===A?55:90),min:50,max:100,step:1,withInputField:!1,marks:[{value:55,label:optimoleDashboardApp.strings.options_strings.low_q_title},{value:75,label:optimoleDashboardApp.strings.options_strings.medium_q_title},{value:90,label:optimoleDashboardApp.strings.options_strings.high_q_title}],onChange:s=>{a(!0);const o={...e};o.quality=s,t(o)}}),o&&(0,s.createElement)("div",{className:"flex justify-center w-full text-center"},l?(0,s.createElement)("div",{className:"flex items-center gap-5"},(0,s.createElement)("p",{className:"text-base"},optimoleDashboardApp.strings.options_strings.sample_image_loading),(0,s.createElement)(u.Icon,{icon:g,className:"animate-spin"})):(0,s.createElement)(s.Fragment,null,r.id&&0<r.original_size&&(0,s.createElement)("div",null,0<x()?(0,s.createElement)("p",{className:"text-base"},100-x(),"% ",optimoleDashboardApp.strings.latest_images.smaller):(0,s.createElement)("p",{className:"text-base"},optimoleDashboardApp.strings.latest_images.same_size),(0,s.createElement)(Me,{max:100,value:100-x()}),(0,s.createElement)("hr",{className:"my-4 border-grayish-blue"}),(0,s.createElement)(gt(),{leftImageLabel:optimoleDashboardApp.strings.options_strings.image_1_label,rightImageLabel:optimoleDashboardApp.strings.options_strings.image_2_label,leftImage:r.original,rightImage:r.optimized}),(0,s.createElement)(u.Button,{variant:"default",icon:g,className:"mt-2",onClick:()=>{n(!0),xe({quality:e.quality,force:"yes"},(()=>n(!1)))}}),(0,s.createElement)("p",{className:"text-base"},optimoleDashboardApp.strings.options_strings.quality_slider_desc)),!(r.id&&0<r.original_size)&&0>r.id&&(0,s.createElement)("div",{className:"flex items-center gap-5 text-center"},(0,s.createElement)("p",{className:"text-base"},optimoleDashboardApp.strings.options_strings.no_images_found)))))));var A},bt=({settings:e,setSettings:t,setCanSave:a})=>{const{isLoading:l}=(0,c.useSelect)((e=>{const{isLoading:t}=e("optimole");return{isLoading:t()}})),[n,r]=(0,o.useState)(""),[i,d]=(0,o.useState)(""),p="disabled"!==e.resize_smart,g="disabled"!==e.limit_dimensions,b="disabled"!==e.lazyload,h="disabled"===e.scale,_=(s,o)=>{a(!0);const l={...e};l[s]=o?"enabled":"disabled",t(l)},f=(s,o)=>{a(!0);const l={...e};l[s]=o,t(l)},E=Object.keys(e.defined_image_sizes).filter((t=>"object"==typeof e.defined_image_sizes[t]));return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_resize_smart_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_resize_smart_desc}}),checked:p,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("resize_smart",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),b&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.toggle_scale,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.scale_desc}}),checked:h,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("scale",!e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"})," "),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_limit_dimensions_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_limit_dimensions_desc}}),checked:g,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("limit_dimensions",e)}),g&&(0,s.createElement)(u.BaseControl,null,(0,s.createElement)("div",{className:"flex gap-8"},(0,s.createElement)(u.__experimentalNumberControl,{label:optimoleDashboardApp.strings.options_strings.width_field,labelPosition:"side",value:e.limit_width,type:"number",min:100,max:1e4,className:"basis-1/2 sm:basis-1/4",onChange:e=>f("limit_width",e)}),(0,s.createElement)(u.__experimentalNumberControl,{label:optimoleDashboardApp.strings.options_strings.height_field,labelPosition:"side",value:e.limit_height,type:"number",min:100,max:1e4,className:"basis-1/2 sm:basis-1/4",onChange:e=>f("limit_height",e)}))),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.BaseControl,{label:optimoleDashboardApp.strings.options_strings.add_image_size_desc},(0,s.createElement)("p",{className:"components-base-control__help mt-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.image_size_notice}}),(0,s.createElement)("div",{className:"flex flex-col sm:flex-row p-6 bg-light-blue border border-blue-300 rounded-md items-stretch sm:items-center gap-8"},(0,s.createElement)(u.TextControl,{label:optimoleDashboardApp.strings.options_strings.width_field,placeholder:optimoleDashboardApp.strings.options_strings.width_field,hideLabelFromVision:!0,type:"number",min:1,value:n,onChange:r,className:"optml__input sm:basis-2/5"}),(0,s.createElement)(u.TextControl,{label:optimoleDashboardApp.strings.options_strings.height_field,placeholder:optimoleDashboardApp.strings.options_strings.height_field,value:i,onChange:d,hideLabelFromVision:!0,type:"number",min:1,className:"optml__input sm:basis-2/5"}),(0,s.createElement)(u.Button,{variant:"primary",isBusy:l,disabled:l,className:"optml__button flex w-full justify-center rounded font-bold min-h-40 basis-1/5",onClick:()=>{if(!n||!i||isNaN(n)||isNaN(i))return;const s="optimole_"+n+"_"+i+"_crop",o={...e.defined_image_sizes,[s]:{width:n,height:i}};a(!0);const l={...e};l.defined_image_sizes=o,t(l),r(""),d("")}},optimoleDashboardApp.strings.options_strings.add_image_size_button))),0<E.length&&(0,s.createElement)(u.BaseControl,{label:optimoleDashboardApp.strings.options_strings.image_sizes_title,className:"pt-4"},E.map((o=>(0,s.createElement)("div",{key:o,className:"flex p-3 my-3 bg-light-blue border border-blue-300 rounded-md items-center justify-between gap-8"},(0,s.createElement)("div",{className:"flex flex-wrap items-center gap-2"},(0,s.createElement)("div",null,(0,s.createElement)("p",{className:"m-0 inline-block",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.name}})," ",o),(0,s.createElement)("p",{className:"m-0"},(0,s.createElement)("b",null,optimoleDashboardApp.strings.options_strings.width_field),": ",e.defined_image_sizes[o].width),(0,s.createElement)("p",{className:"m-0"},(0,s.createElement)("b",null,optimoleDashboardApp.strings.options_strings.height_field),": ",e.defined_image_sizes[o].height)),(0,s.createElement)(u.Button,{variant:"default",icon:"trash",disabled:l,onClick:()=>(s=>{const o={...e.defined_image_sizes,[s]:"remove"};a(!0);const l={...e};l.defined_image_sizes=o,t(l)})(o)}))))))},ht=({settings:e,setSettings:t,setCanSave:a})=>{const{isLoading:l}=(0,c.useSelect)((e=>{const{isLoading:t}=e("optimole");return{isLoading:t()}})),n="disabled"!==e.lazyload_placeholder,r="disabled"!==e.native_lazyload,i="disabled"!==e.bg_replacer,d="disabled"!==e.video_lazyload,p="disabled"!==e.no_script,g=e.placeholder_color,[b,h]=(0,o.useState)(!1),_=(s,o)=>{a(!0);const l={...e};l[s]=o?"enabled":"disabled",t(l)},f=(s,o)=>{a(!0);const l={...e};l[s]=o,t(l)},E=e=>{f("placeholder_color",e)};return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.BaseControl,{className:"mt-2",label:optimoleDashboardApp.strings.options_strings.lazyload_behaviour_title},(0,s.createElement)("p",{className:"components-base-control__help mt-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.lazyload_behaviour_desc}}),(0,s.createElement)("div",{className:"flex gap-8 ml-4"},(0,s.createElement)(u.RadioControl,{labelPosition:"side",className:"lazyload_behaviour",selected:e.lazyload_type||"all",options:[{label:(0,s.createElement)("div",null,(0,s.createElement)("strong",null,optimoleDashboardApp.strings.options_strings.lazyload_behaviour_fixed.replace("[N]",e.skip_lazyload_images)),"fixed"===e.lazyload_type&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",{className:"mt-2 text-sm text-gray-600"},optimoleDashboardApp.strings.options_strings.lazyload_behaviour_fixed_desc),(0,s.createElement)("div",{className:"mt-3 flex gap-8"},(0,s.createElement)(u.__experimentalNumberControl,{label:optimoleDashboardApp.strings.options_strings.exclude_first,labelPosition:"side",value:e.skip_lazyload_images,type:"number",min:0,className:"basis-1/2 md:basis-1/3",onChange:e=>f("skip_lazyload_images",e)})))),value:"fixed"},{label:(0,s.createElement)("div",null,(0,s.createElement)("strong",null,optimoleDashboardApp.strings.options_strings.lazyload_behaviour_viewport),"viewport"===e.lazyload_type&&(0,s.createElement)("p",{className:"mt-2 text-sm text-gray-600"},optimoleDashboardApp.strings.options_strings.lazyload_behaviour_viewport_desc)),value:"viewport"},{label:(0,s.createElement)("div",null,(0,s.createElement)("strong",null,optimoleDashboardApp.strings.options_strings.lazyload_behaviour_all),"all"===e.lazyload_type&&(0,s.createElement)("p",{className:"mt-2 text-sm text-gray-600"},optimoleDashboardApp.strings.options_strings.lazyload_behaviour_all_desc)),value:"all"}],onChange:e=>f("lazyload_type",e)}))),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.BaseControl,null,(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_lazyload_placeholder_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_lazyload_placeholder_desc}}),checked:n,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("lazyload_placeholder",e)}),n&&(0,s.createElement)("div",{className:"relative inline-block"},(0,s.createElement)(u.Button,{disabled:l,className:"gap-3 mt-2 py-3 h-auto rounded text-inherit border-gray-400 border-2 border-solid font-medium",onClick:()=>{h(!b)}},(0,s.createElement)(u.ColorIndicator,{colorValue:g}),(0,s.createElement)("span",null,optimoleDashboardApp.strings.options_strings.lazyload_placeholder_color)),b&&(0,s.createElement)(u.Popover,{placement:"bottom",position:"middle center",variant:"unstyled",className:"shadow-md border-grayish-blue border border-solid rounded bg-white p-2",onFocusOutside:()=>h(!1)},(0,s.createElement)(u.ColorPicker,{color:g,onChange:E,enableAlpha:!0,defaultValue:""}),(0,s.createElement)(u.Button,{isDestructive:!0,className:"w-full text-center flex justify-center",variant:"secondary",onClick:()=>{E("")}},optimoleDashboardApp.strings.options_strings.clear)))),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.toggle_native,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.native_desc}}),checked:r,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("native_lazyload",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_video_lazyload_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_video_lazyload_desc}}),checked:d,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("video_lazyload",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_noscript_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_noscript_desc}}),checked:p,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("no_script",e)}),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.ToggleControl,{label:optimoleDashboardApp.strings.options_strings.enable_bg_lazyload_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.enable_bg_lazyload_desc}}),checked:i,disabled:l,className:m()({"is-disabled":l}),onChange:e=>_("bg_replacer",e)}),i&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(u.BaseControl,{label:optimoleDashboardApp.strings.options_strings.watch_title_lazyload,id:"optml-css-watchers"},(0,s.createElement)("p",{className:"components-base-control__help mt-0",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.options_strings.watch_desc_lazyload}}),(0,s.createElement)(u.TextareaControl,{id:"optml-css-watchers",placeholder:optimoleDashboardApp.strings.options_strings.watch_placeholder_lazyload,value:e.watchers,onChange:e=>f("watchers",e)}))))},_t="extension",ft="page_url",Et="page_url_match",vt="filename",yt="class",xt=[{label:optimoleDashboardApp.strings.options_strings.filter_filename,value:vt},{label:optimoleDashboardApp.strings.options_strings.filter_ext,value:_t},{label:optimoleDashboardApp.strings.options_strings.filter_url,value:ft},{label:optimoleDashboardApp.strings.options_strings.filter_class,value:yt}],wt=[{label:optimoleDashboardApp.strings.options_strings.exclude_filename_desc,value:vt},{label:optimoleDashboardApp.strings.options_strings.exclude_ext_desc,value:_t},{label:optimoleDashboardApp.strings.options_strings.exclude_url_desc,value:ft},{label:optimoleDashboardApp.strings.options_strings.exclude_url_match_desc,value:Et},{label:optimoleDashboardApp.strings.options_strings.exclude_class_desc,value:yt}],At=[{label:".SVG",value:"svg"},{label:".JPG",value:"jpg"},{label:".PNG",value:"png"},{label:".GIF",value:"gif"},{label:".WEBP",value:"webp"}],St=({label:e,help:t,type:a,settings:l,setSettings:n,setCanSave:r})=>{const{isLoading:i}=(0,c.useSelect)((e=>{const{isLoading:t}=e("optimole");return{isLoading:t()}})),d=optimoleDashboardApp.strings.options_strings.filter_operator_contains,[m,p]=(0,o.useState)(vt),[g,b]=(0,o.useState)(optimoleDashboardApp.strings.options_strings.filter_operator_contains),[h,_]=(0,o.useState)(""),[f,E]=(0,o.useState)(d),[v,y]=(0,o.useState)(!1),x=0<Object.keys(l.filters[a][_t]).length&&Object.values(l.filters[a][_t]).some((e=>!1!==e))||0<Object.keys(l.filters[a][yt]).length&&Object.values(l.filters[a][yt]).some((e=>!1!==e))||0<Object.keys(l.filters[a][ft]).length&&Object.values(l.filters[a][ft]).some((e=>!1!==e))||0<Object.keys(l.filters[a][Et]).length&&Object.values(l.filters[a][Et]).some((e=>!1!==e))||0<Object.keys(l.filters[a][vt]).length&&Object.values(l.filters[a][vt]).some((e=>!1!==e));return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.BaseControl,{label:e,help:m===ft&&optimoleDashboardApp.strings.options_strings.filter_helper},(0,s.createElement)("p",{className:"components-base-control__help mt-0",dangerouslySetInnerHTML:{__html:t}}),(0,s.createElement)("div",{className:"flex flex-col md:flex-row p-6 my-3 bg-light-blue border border-blue-300 rounded-md items-center justify-between gap-8"},(0,s.createElement)("div",{className:"flex justify-start items-center gap-4"},(0,s.createElement)(u.SelectControl,{value:m,options:xt,onChange:e=>{let t="";e===_t&&(t="svg",b(optimoleDashboardApp.strings.options_strings.filter_operator_is)),e===vt&&b(optimoleDashboardApp.strings.options_strings.filter_operator_contains),e===yt&&b(optimoleDashboardApp.strings.options_strings.filter_operator_contains),y(!1),_(t),p(e),E(h)},className:"optml__select",__nextHasNoMarginBottom:!0}),m===ft?(0,s.createElement)(u.SelectControl,{value:f,options:[{label:optimoleDashboardApp.strings.options_strings.filter_operator_contains,value:optimoleDashboardApp.strings.options_strings.filter_operator_contains},{label:optimoleDashboardApp.strings.options_strings.filter_operator_matches,value:optimoleDashboardApp.strings.options_strings.filter_operator_matches}],onChange:E,className:"optml__select",__nextHasNoMarginBottom:!0}):(0,s.createElement)("p",{className:"m-0"},g),m===_t?(0,s.createElement)(u.SelectControl,{value:h,options:At,onChange:_,className:"optml__select",__nextHasNoMarginBottom:!0}):(0,s.createElement)(u.TextControl,{value:h,placeholder:"matches"===f?"path":"word",onChange:e=>{_(e),y(!1)},className:"optml__input"})),(0,s.createElement)(u.Button,{variant:"primary",isBusy:i,disabled:i,className:"optml__button flex w-full justify-center rounded font-bold min-h-40 basis-1/5",onClick:()=>{if(3>h.length)return void y(!0);const e={...l.filters};let t=m;m===ft&&"matches"===f&&(t=Et),e[a]&&"object"==typeof e[a]||(e[a]={}),e[a][t]&&!Array.isArray(e[a][t])||(e[a][t]={}),e[a][t][h]=!0,n({...l,filters:e}),m!==_t&&_(""),r(!0),_(""),p(vt),E(d)}},optimoleDashboardApp.strings.options_strings.add_filter)),v&&(0,s.createElement)("p",{className:"text-red-500 bg-red-100 p-2 rounded-md border border-solid border-red-200"},optimoleDashboardApp.strings.options_strings.filter_length_error)),x&&(0,s.createElement)(u.BaseControl,{label:"optimize"===a?optimoleDashboardApp.strings.options_strings.active_optimize_exclusions:optimoleDashboardApp.strings.options_strings.active_lazyload_exclusions,className:"py-4"},wt.map((e=>Object.keys(l.filters[a][e.value]).filter((t=>!1!==l.filters[a][e.value][t])).map((t=>(0,s.createElement)("div",{key:t,className:"flex p-3 my-3 bg-light-blue border border-blue-300 rounded-md items-center justify-between gap-8"},(0,s.createElement)("div",{className:"flex items-center gap-1"},(0,s.createElement)("p",{className:"m-0 inline-block",dangerouslySetInnerHTML:{__html:e.label}}),(0,s.createElement)("b",null,t)),(0,s.createElement)(u.Button,{variant:"default",icon:"trash",disabled:i,onClick:()=>((e,t)=>{const s={...l.filters};s[a][e][t]=!1,n({...l,filters:s}),r(!0)})(e.value,t)}))))))))},Nt=({settings:e,setSettings:t,setCanSave:a})=>{const o="disabled"!==e.lazyload;return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(St,{label:optimoleDashboardApp.strings.options_strings.exclude_title_optimize,help:optimoleDashboardApp.strings.options_strings.exclude_desc_optimize,type:"optimize",settings:e,setSettings:t,setCanSave:a}),o&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)(St,{label:optimoleDashboardApp.strings.options_strings.exclude_title_lazyload,help:optimoleDashboardApp.strings.options_strings.exclude_desc_lazyload,type:"lazyload",settings:e,setSettings:t,setCanSave:a})))};function Dt({options:e,value:t,onChange:a,label:o,disabled:l=!1,className:n}){return m()({"opacity-50":l},"transition-all my-6 gap-6 grid opacity-100"),(0,s.createElement)("fieldset",{className:`my-6 gap-6 grid ${n}`,onChange:e=>{a(e.target.value)}},o&&(0,s.createElement)("legend",{className:"uppercase font-semibold text-s text-light-black mb-6 inline-block"},o),e.map(((e,a)=>{const{title:o,value:n,description:r}=e,i=t===n,c=m()({"outline-info":i,"outline-transparent":!i},"flex gap-6 items-start bg-gray-50 rounded-md p-4 outline -outline-offset-3 outline-3 transition-all");return(0,s.createElement)("label",{htmlFor:n,key:n,className:c},(0,s.createElement)(Ct,{isActive:i}),(0,s.createElement)("div",{className:"grid space-y-2"},o&&(0,s.createElement)("div",{className:"text-base font-medium text-gray-700"},o),r&&(0,s.createElement)("div",{className:"text-sm text-gray-500"},r)),(0,s.createElement)("input",{type:"radio",name:"label",value:n,id:n,className:"!opacity-0 !w-0 !h-0 !overflow-hidden !absolute !pointer-events-none",disabled:l}))})))}const Ct=({isActive:e})=>{const t=m()({"bg-white outline-info":e,"bg-gray-200 outline-transparent":!e},"w-[24px] h-[24px] rounded-full flex items-center justify-center flex-shrink-0 outline outline-3 -outline-offset-3 transition-all"),a=m()({"bg-info":e},"w-[12px] h-[12px] rounded-full background-info transition-all");return(0,s.createElement)("div",{className:t},e&&(0,s.createElement)("div",{className:a}))};function Lt({title:e,progress:t,description:a,onCancel:o,hideCancel:l=!1}){const{strings:n}=optimoleDashboardApp;return(0,s.createElement)("div",{className:"bg-gray-50 rounded-md p-4 space-y-4"},(0,s.createElement)("div",{className:"flex gap-3 items-center"},(0,s.createElement)(lt,{icon:_,className:"text-info animate-spin -scale-y-100"}),e&&(0,s.createElement)("p",{className:"uppercase text-s font-semibold text-light-black m-0"},e),!l&&(0,s.createElement)("button",{onClick:o,className:"appearance-none border border-info text-info bg-transparent rounded px-4 py-2 ml-auto text-s hover:border-red-500 hover:bg-red-500 hover:text-white cursor-pointer"},n.cancel)),(0,s.createElement)(Me,{value:t}),a&&(0,s.createElement)("p",{className:"text-xs text-gray-500"},a))}const kt=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),Tt=window.wp.compose;function It({icon:e,labels:t={},onRequestClose:a=(()=>{}),onConfirm:o=(()=>{}),variant:l="default",onSecondaryAction:n=(()=>{})}){const r=(0,Tt.useViewportMatch)("small","<"),i=m()({"bg-stale-yellow":"warning"===l,"bg-light-blue":"default"===l},"p-2 rounded-full flex items-center justify-center"),c=m()({"bg-mango-yellow":"warning"===l},"optml__button flex justify-center px-5 py-3 rounded font-bold min-h-40 basis-1/5");return(0,s.createElement)(u.Modal,{__experimentalHideHeader:!0,className:"max-w-xl antialiased",onRequestClose:a,isFullScreen:r},(0,s.createElement)(u.Button,{icon:kt,onClick:a,label:optimoleDashboardApp.strings.csat.close,className:"fixed right-3 top-3 cursor-pointer"}),(0,s.createElement)("div",{className:"flex flex-col items-center"},(0,s.createElement)("span",{className:i},(0,s.createElement)(u.Icon,{icon:e,size:24})),(0,s.createElement)("h2",{className:"mb-0",dangerouslySetInnerHTML:{__html:t.title}}),(0,s.createElement)("p",{className:"text-center mx-0 my-4 text-gray-700",dangerouslySetInnerHTML:{__html:t.description}}),(0,s.createElement)("div",{class:"flex gap-4"},(0,s.createElement)(u.Button,{variant:"primary",className:c,onClick:o},t.action),t.secondaryAction&&(0,s.createElement)(u.Button,{variant:"default",className:"optml__button flex justify-center rounded font-bold min-h-40",onClick:n},t.secondaryAction))))}const Ot=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"M12.5 5L10 19h1.9l2.5-14z"})),Mt=({type:e})=>{const{logs:t}=(0,c.useSelect)((e=>{const{getLogs:t}=e("optimole");return{logs:t()}})),[a,l]=(0,o.useState)(!1),n=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const a=setInterval((()=>{n.current&&(n.current.innerHTML=t[e],n.current.scrollTop=n.current.scrollHeight)}),15e3);return()=>clearInterval(a)}),[]),(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"w-full flex justify-end text-info my-2"},(0,s.createElement)(u.Button,{variant:"tertiary",className:"py-2 px-0",target:"_blank",href:`${window.ajaxurl}?action=optml_fetch_logs&nonce=${optimoleDashboardApp.nonce}&type=${e}`},optimoleDashboardApp.strings.options_strings.view_logs),(0,s.createElement)(u.Icon,{icon:Ot,className:"fill-info py-2"}),(0,s.createElement)(u.Button,{variant:"tertiary",className:"py-2 px-0",onClick:()=>l(!a)},a?optimoleDashboardApp.strings.options_strings.hide_logs:optimoleDashboardApp.strings.options_strings.show_logs)),a&&(0,s.createElement)("div",{className:"flex flex-col p-6 bg-light-blue border border-blue-300 rounded-md min-h-[200px] max-h-[200px] overflow-y-scroll",ref:n,dangerouslySetInnerHTML:{__html:t[e]}}))},zt=({settings:e,canSave:t,setSettings:a,setCanSave:l})=>{const{strings:n,cron_disabled:r,show_exceed_plan_quota_notice:i}=optimoleDashboardApp,{conflicts:d,options_strings:p}=n,g="offload",u="rollback",b="stopOffload",h="stopRollback",f="planQuotaNotice",{offloadConflicts:x,errorMedia:w,offloadLibraryLink:A,isLoading:S,loadingSync:N,loadingRollback:D,rollbackLibraryLink:C,queryArgs:k,totalNumberOfImages:T,processedImages:I,offloadFinishNotice:O,offloadLimitReached:M,offloadLimit:z}=(0,c.useSelect)((e=>{const{getOffloadConflicts:t,getErrorMedia:a,getLoadingSync:s,getLoadingRollback:o,getOffloadLibraryLink:l,getRollbackLibraryLink:n,getTotalNumberOfImages:r,getProcessedImages:i,getQueryArgs:c,isLoading:d,getSiteSettings:m,getOffloadLimit:p}=e("optimole");return{offloadConflicts:t(),errorMedia:a(),offloadLibraryLink:l(),isLoading:d(),loadingSync:s(),loadingRollback:o(),rollbackLibraryLink:n(),queryArgs:c(),totalNumberOfImages:r(),processedImages:i(),offloadFinishNotice:m("show_offload_finish_notice"),offloadLimitReached:"enabled"===m("offload_limit_reached"),offloadLimit:p()}}),[]),{setErrorMedia:j,setCheckedOffloadConflicts:B,setOffloadConflicts:R,setProcessedImages:H,setOffloadLimitReached:F}=(0,c.useDispatch)("optimole"),[P,q]=(0,o.useState)(null),V="disabled"!==e.offloading_status,G="disabled"!==e.rollback_status;(0,o.useEffect)((()=>{V&&Ae({action:"offload_images",refresh:!0}),G&&Ae({action:"rollback_images",refresh:!0})}),[]);const $=async(t=[])=>{await(async()=>{try{return await L()({path:optimoleDashboardApp.routes.clear_offload_errors,method:"GET"})}catch(e){console.log(e)}})();const s={...e};s.show_offload_finish_notice="",s.offloading_status="enabled",a(s),ve(s,!1,!0,(()=>{j(!1),H(0),F(!1),Ae({action:"offload_images"}),l(!1)}))},K=[{title:p.offload_radio_option_rollback_title,description:p.offload_radio_option_rollback_desc,value:"rollback"},{title:p.offload_radio_option_offload_title,description:p.offload_radio_option_offload_desc,value:"offload"}],Z="enabled"===e.offload_media?"offload":"rollback",U=N||D;return(0,s.createElement)("div",null,(0,s.createElement)("h1",{className:"text-xl font-bold"},p.enable_offload_media_title),(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:p.enable_offload_media_desc}}),O&&(0,s.createElement)(dt,{title:"offload"===O?p.offloading_success:p.rollback_success,type:"primary",onDismiss:()=>{ve({show_offload_finish_notice:""},!1,!0)}}),r&&(0,s.createElement)(dt,{type:"error",text:n.cron_error}),!U&&(0,s.createElement)(Dt,{className:m()({"opacity-50 pointer-events-none":S||r}),label:p.offloading_radio_legend,options:K,value:Z,onChange:t=>{const s="offload"===t,o={...e};o.offload_media=s?"enabled":"disabled",a(o),l(!0),q(s?i?f:g:u)}}),U&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Lt,{title:N?p.sync_media_progress:p.rollback_media_progress,progress:Math.round(I/T*100),onCancel:()=>{N&&q(b),D&&q(h)},description:0===T?p.calculating_estimated_time:p.images_processing}),(0,s.createElement)(Mt,{type:N?"offload":"rollback"})),"offload_images"===w&&(0,s.createElement)(dt,{type:"error",smallTitle:!0,title:p.sync_media_error,text:p.sync_media_error_desc}),"rollback_images"===w&&(0,s.createElement)(dt,{type:"error",smallTitle:!0,title:p.rollback_media_error,text:p.rollback_media_error_desc}),0<x.length&&(0,s.createElement)(dt,{type:"warning",title:p.offload_conflicts_part_1},(0,s.createElement)("div",{className:"list-disc grid gap-3 mt-2"},(0,s.createElement)("ul",{className:"grid gap-1"},x.map((e=>(0,s.createElement)("li",{key:e,className:"font-semibold text-base m-0"},e)))),(0,s.createElement)("p",{className:"m-0 text-sm"},p.offload_conflicts_part_2),(0,s.createElement)("button",{disabled:S,className:m()({"opacity-50 pointer-events-none":S},"justify-self-start font-semibold flex items-center appearance-none border border-info text-info bg-white rounded px-4 py-2 text-sm hover:text-white hover:bg-info cursor-pointer"),onClick:()=>R([])},d.conflict_close))),!U&&(0,s.createElement)("button",{onClick:e=>{e.preventDefault(),"offload"===Z&&q(i?f:g),"rollback"===Z&&q(u)},disabled:S||r,className:m()({"opacity-50 pointer-events-none":S||r},"font-semibold flex items-center gap-2 appearance-none border border-info text-info bg-transparent rounded px-4 py-2 ml-auto text-sm hover:text-white hover:bg-info cursor-pointer")},(0,s.createElement)(lt,{icon:_,className:"w-4 h-4"}),(0,s.createElement)("span",null,p.sync_media)),!U&&M&&(0,s.createElement)(dt,{type:"warning",text:p.offload_limit_reached.replace("#offload_limit#",z)}),P&&(0,s.createElement)(It,{...(Y=P,{onRequestClose:()=>q(null),...{[g]:{icon:E,onConfirm:()=>{$(),q(null)},labels:{title:p.offloading_start_title,description:p.offloading_start_description,action:p.offloading_start_action}},[u]:{icon:v,onConfirm:()=>{B(!1),R([]),we((t=>{if(0===t.data.length){const t={...e};t.show_offload_finish_notice="",t.rollback_status="enabled",ve(t,!1,!0,(()=>{j(!1),H(0),Ae({action:"rollback_images"}),l(!1)}))}})),q(null)},labels:{title:p.rollback_start_title,description:p.rollback_start_description,action:p.rollback_start_action}},[b]:{variant:"warning",icon:y,onConfirm:()=>{q(null);const t=e;t.offloading_status="disabled",ve(t)},labels:{title:p.offloading_stop_title,description:p.offloading_stop_description,action:p.offloading_stop_action}},[h]:{variant:"warning",icon:y,onConfirm:()=>{q(null);const t=e;t.rollback_status="disabled",ve(t)},labels:{title:p.rollback_stop_title,description:p.rollback_stop_description,action:p.rollback_stop_action}},[f]:{variant:"warning",icon:y,onConfirm:()=>{$(),q(null)},onSecondaryAction:()=>{q(null);const t=e;t.offload_media="disabled",ve(t),window.onbeforeunload=null},labels:{title:p.exceed_plan_quota_notice_title,description:p.exceed_plan_quota_notice_description,action:p.exceed_plan_quota_notice_start_action,secondaryAction:p.exceed_plan_quota_notice_secondary_action}}}[Y]})}),A&&(0,s.createElement)("p",{className:"m-0"},p.sync_media_link," ",(0,s.createElement)("a",{href:k.url},p.here)),C&&(0,s.createElement)("p",{className:"m-0"},p.rollback_media_link," ",(0,s.createElement)("a",{href:k.url},optimoleDashboardApp.strings.options_strings.here)));var Y},jt=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"}));function Bt(e){const{user_data:t,strings:a}=optimoleDashboardApp,{options_strings:o}=a,{settings:l,setSettings:n,setCanSave:r}=e,i=(0,c.useSelect)((e=>{const{isLoading:t,isSubApiKey:a}=e("optimole");return{isLoading:t(),isSubApiKey:a()}}),[]),{isLoading:d,isSubApiKey:p}=i,g="disabled"!==l.cloud_images,b=!p&&g,h=t.whitelist||[];return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(u.ToggleControl,{label:o.enable_cloud_images_title,help:()=>(0,s.createElement)("p",{dangerouslySetInnerHTML:{__html:o.enable_cloud_images_desc}}),checked:g,disabled:d,className:m()({"is-disabled":d}),onChange:e=>((e,t)=>{r(!0);const a={...l};a.cloud_images=t?"enabled":"disabled",n(a)})(0,e)}),g&&(0,s.createElement)("div",{className:"m-0"},(0,s.createElement)("a",{href:o.cloud_library_btn_link,className:"font-semibold text-info text-sm hover:text-info inline-flex items-center"},o.cloud_library_btn_text,(0,s.createElement)(u.Icon,{icon:jt,className:"inline-block ml-2 fill-current"}))),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),b&&(0,s.createElement)(u.BaseControl,{label:o.cloud_site_title,help:o.cloud_site_desc},(0,s.createElement)("div",{className:"optml__token__base flex p-6 bg-light-blue border border-blue-300 rounded-md items-center gap-8"},(0,s.createElement)(u.FormTokenField,{value:Object.keys(l.cloud_sites).filter((e=>"all"!==e&&"false"!==l.cloud_sites[e])).map((e=>e))||[],suggestions:h,onChange:e=>{r(!0);const t={},a={...l};0===e.length?t.all="true":e.forEach((e=>{t[e]="true"})),Object.keys(a.cloud_sites).forEach((e=>{Object.prototype.hasOwnProperty.call(t,e)||(t[e]="false")})),a.cloud_sites=t,n(a)},__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__experimentalValidateInput:e=>h.includes(e),className:"optml__token"}))))}const Rt=({tab:e,setTab:t,canSave:a,setCanSave:l,settings:n,setSettings:r})=>{const{siteSettings:i,isLoading:d,damEnabled:m}=(0,c.useSelect)((e=>{const{getSiteSettings:t,getQueryArgs:a,isLoading:s}=e("optimole"),o=t();return{siteSettings:o,damEnabled:o.cloud_images,isLoading:s(),queryArgs:a()}}),[]),[p,g]=(0,o.useState)(!1),[b,h]=(0,o.useState)(!1);(0,o.useEffect)((()=>{((e=!0)=>{const{dam_url:t,strings:a}=window.optimoleDashboardApp,{cloud_library:s}=a,o=document.querySelector('a[href*="page=optimole-dam"]');if(!e&&!o)return;if(!e){if(!o)return;return void(o.style.display="none")}if(o)return void(o.style={});const l=document.createElement("li"),n=document.createElement("a");l.appendChild(n),n.href=t,n.innerHTML=s;const r=document.querySelector("#toplevel_page_optimole ul");r&&r.insertBefore(l,r.firstChild)})("enabled"===m)}),[m]),(0,o.useEffect)((()=>{const e=localStorage.getItem("optimole_settings_visits");3<e||localStorage.setItem("optimole_settings_visits",e?parseInt(e)+1:1)}),[e]);const _=()=>{ve(n,i.banner_frontend!==n.banner_frontend),l(!1)};return(0,s.createElement)("div",{className:"optml-settings flex flex-col sm:flex-row bg-white p-8 border-0 rounded-lg shadow-md gap-8"},(0,s.createElement)(ot,{tab:e,setTab:t,settings:n}),(0,s.createElement)("div",{className:"basis-4/5"},"general"===e&&(0,s.createElement)(mt,{settings:n,setSettings:r,setCanSave:l}),"compression"===e&&(0,s.createElement)(ut,{settings:n,setSettings:r,setCanSave:l,showSample:p,isSampleLoading:b,setIsSampleLoading:h}),"resize"===e&&(0,s.createElement)(bt,{settings:n,setSettings:r,setCanSave:l}),"lazyload"===e&&(0,s.createElement)(ht,{settings:n,setSettings:r,setCanSave:l}),"exclusions"===e&&(0,s.createElement)(Nt,{settings:n,setSettings:r,setCanSave:l}),"cloud_library"===e&&(0,s.createElement)(Bt,{settings:n,canSave:a,setSettings:r,setCanSave:l,onSaveSettings:_}),"offload_media"===e&&(0,s.createElement)(zt,{settings:n,canSave:a,setSettings:r,setCanSave:l,onSaveSettings:_}),(0,s.createElement)("div",{className:"flex justify-start items-center gap-5 mt-8"},(0,s.createElement)(u.Button,{variant:"primary",isBusy:d,disabled:!a,className:"optml__button flex w-full justify-center rounded font-bold min-h-40 basis-1/5",onClick:_},optimoleDashboardApp.strings.options_strings.save_changes),"disabled"===n.autoquality&&"compression"===e&&(0,s.createElement)(u.Button,{variant:"default",disabled:d,onClick:()=>{p||(h(!0),xe({quality:n.quality},(()=>h(!1)))),g(!p)}},optimoleDashboardApp.strings.options_strings.view_sample_image))))},Ht=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{fillRule:"evenodd",d:"M17.375 15.656A6.47 6.47 0 0018.5 12a6.47 6.47 0 00-.943-3.374l-1.262.813c.448.749.705 1.625.705 2.561a4.977 4.977 0 01-.887 2.844l1.262.813zm-1.951 1.87l-.813-1.261A4.976 4.976 0 0112 17c-.958 0-1.852-.27-2.613-.736l-.812 1.261A6.47 6.47 0 0012 18.5a6.47 6.47 0 003.424-.974zm-8.8-1.87A6.47 6.47 0 015.5 12c0-1.235.344-2.39.943-3.373l1.261.812A4.977 4.977 0 007 12c0 1.056.328 2.036.887 2.843l-1.262.813zm2.581-7.803A4.977 4.977 0 0112 7c1.035 0 1.996.314 2.794.853l.812-1.262A6.47 6.47 0 0012 5.5a6.47 6.47 0 00-3.607 1.092l.812 1.261zM12 20a8 8 0 100-16 8 8 0 000 16zm0-4.5a3.5 3.5 0 100-7 3.5 3.5 0 000 7z",clipRule:"evenodd"})),Ft=(0,s.createElement)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)(p.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6.68822 16.625L5.5 17.8145L5.5 5.5L18.5 5.5L18.5 16.625L6.68822 16.625ZM7.31 18.125L19 18.125C19.5523 18.125 20 17.6773 20 17.125L20 5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19.5247C4 19.8173 4.16123 20.086 4.41935 20.2237C4.72711 20.3878 5.10601 20.3313 5.35252 20.0845L7.31 18.125ZM16 9.99997H8V8.49997H16V9.99997ZM8 14H13V12.5H8V14Z"})),Pt=(0,s.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(p.Path,{d:"M11.1 15.8H20v-1.5h-8.9v1.5zm0-8.6v1.5H20V7.2h-8.9zM6 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),qt=[{title:optimoleDashboardApp.strings.help.get_support_title,description:optimoleDashboardApp.strings.help.get_support_desc,cta:optimoleDashboardApp.strings.help.get_support_cta,link:"https://wordpress.org/support/plugin/optimole-wp/",icon:Ht},{title:optimoleDashboardApp.strings.help.feat_request_title,description:optimoleDashboardApp.strings.help.feat_request_desc,cta:optimoleDashboardApp.strings.help.feat_request_cta,link:"https://github.com/Codeinwp/optimole-wp/discussions",icon:Ft},{title:optimoleDashboardApp.strings.help.feedback_title,description:optimoleDashboardApp.strings.help.feedback_desc,cta:optimoleDashboardApp.strings.help.feedback_cta,link:"https://wordpress.org/plugins/optimole-wp/#developers",icon:Pt}],Vt=[{title:optimoleDashboardApp.strings.help.account_title,items:[{label:optimoleDashboardApp.strings.help.account_item_one,value:"https://docs.optimole.com/article/1134-how-optimole-counts-the-number-of-visitors"},{label:optimoleDashboardApp.strings.help.account_item_two,value:"https://docs.optimole.com/article/1008-what-happens-if-i-exceed-plan-limits"},{label:optimoleDashboardApp.strings.help.account_item_three,value:"https://docs.optimole.com/article/1133-visitors-based-plan"}]},{title:optimoleDashboardApp.strings.help.image_processing_title,items:[{label:optimoleDashboardApp.strings.help.image_processing_item_one,value:"https://docs.optimole.com/article/1173-how-to-get-started-with-optimole-in-just-3-steps"},{label:optimoleDashboardApp.strings.help.image_processing_item_two,value:"https://docs.optimole.com/article/1068-how-optimole-can-serve-webp-images"},{label:optimoleDashboardApp.strings.help.image_processing_item_three,value:"https://docs.optimole.com/article/1475-adding-watermarks-to-your-images"}]},{title:optimoleDashboardApp.strings.help.api_title,items:[{label:optimoleDashboardApp.strings.help.api_item_one,value:"https://docs.optimole.com/article/1323-cloud-library-browsing"},{label:optimoleDashboardApp.strings.help.api_item_two,value:"https://docs.optimole.com/article/1191-exclude-from-optimizing-or-lazy-loading"},{label:optimoleDashboardApp.strings.help.api_item_three,value:"https://docs.optimole.com/article/1307-custom-integration"}]}],Gt="flex p-6 border-2 border-solid border-grayish-blue rounded-md items-start gap-8 basis-1/3",$t=()=>(0,s.createElement)("div",{className:"bg-white p-8 border-0 rounded-lg shadow-md"},(0,s.createElement)("p",{className:"font-bold text-base"},optimoleDashboardApp.strings.help.section_one_title),(0,s.createElement)("div",{className:"flex gap-5 flex-col md:flex-row"},qt.map(((e,t)=>(0,s.createElement)("div",{key:t,className:Gt},(0,s.createElement)("div",{className:"flex w-full flex-col gap-2"},(0,s.createElement)(u.Icon,{icon:e.icon,className:"fill-info",size:42}),(0,s.createElement)("div",{className:"font-bold text-base py-2 text-gray-800"},e.title),(0,s.createElement)("div",{className:"not-italic font-normal text-s text-gray-800"},e.description),(0,s.createElement)(u.ExternalLink,{href:e.link},e.cta)))))),(0,s.createElement)("hr",{className:"my-8 border-grayish-blue"}),(0,s.createElement)("div",{className:"flex items-center justify-between"},(0,s.createElement)("p",{className:"font-bold text-base"},optimoleDashboardApp.strings.help.section_two_title),(0,s.createElement)(u.ExternalLink,{href:"https://docs.optimole.com/"},optimoleDashboardApp.strings.help.section_two_sub)),(0,s.createElement)("div",{className:"flex gap-5 flex-col md:flex-row"},Vt.map(((e,t)=>(0,s.createElement)("div",{key:t,className:Gt},(0,s.createElement)("div",{className:"flex w-full flex-col gap-2"},(0,s.createElement)("div",{className:"font-bold text-base py-2 text-gray-800"},e.title),e.items.map(((e,t)=>(0,s.createElement)("a",{key:t,href:e.value,target:"_blank"},e.label))))))))),Kt=e=>new Promise((t=>{fetch(e).then((()=>{t({success:!0})})).catch((()=>{t({success:!1})}))})),Zt={IDLE:"idle",INSTALLING:"installing",ACTIVATING:"activating",ACTIVE:"active",ERROR:"error"},Ut=()=>{const{i18n:e,activate_url:t,banner_dismiss_key:a,status:l}=optimoleDashboardApp.spc_banner,[n,r]=(0,o.useState)("installed"===l?Zt.INSTALLED:Zt.IDLE),[i,c]=(0,o.useState)(!0),[d,p]=(0,o.useState)(!0),g=n===Zt.INSTALLING||n===Zt.ACTIVATING;if((0,o.useEffect)((()=>{if(!i){const e=setTimeout((()=>{p(!1)}),300);return()=>clearTimeout(e)}}),[i]),!d)return null;const b=m()("bg-white flex flex-col text-gray-700 border-0 rounded-lg overflow-hidden shadow-md relative transition-opacity duration-300",{"opacity-0":!i,"opacity-100":i});return(0,s.createElement)("div",{className:b},(0,s.createElement)("button",{onClick:()=>{Ne(a,(()=>{c(!1)}))},className:"absolute top-2 right-2 p-1 bg-transparent border-0 text-red z-10 cursor-pointer rounded-full flex items-center justify-center hover:opacity-75 transition-opacity text-gray-500 hover:text-info"},(0,s.createElement)("span",{className:"sr-only"},e.dismiss),(0,s.createElement)(u.Icon,{icon:kt,className:"fill-current",size:18})),(0,s.createElement)("div",{className:"p-8 flex flex-col gap-2"},(0,s.createElement)("h3",{className:"text-lg mt-0"},e.title),(0,s.createElement)("p",{className:"text-gray-600 m-0"},e.byline),(0,s.createElement)("ul",{className:"grid gap-2"},e.features.map(((e,t)=>(0,s.createElement)("li",{className:"flex items-center gap-2",key:t},(0,s.createElement)(u.Icon,{icon:nt,className:"fill-info bg-info/20 rounded-full",size:20}),(0,s.createElement)("span",{className:"text-gray-700 font-normal"},e))))),![Zt.ACTIVE,Zt.ERROR].includes(n)&&(0,s.createElement)(u.Button,{variant:"primary",onClick:e=>{if(e.preventDefault(),n===Zt.INSTALLED)return r(Zt.ACTIVATING),void Kt(t).then((e=>{e.success?r(Zt.ACTIVE):r(Zt.ERROR)}));r(Zt.INSTALLING),("wp-cloudflare-page-cache",new Promise((e=>{wp.updates.ajax("install-plugin",{slug:"wp-cloudflare-page-cache",success:()=>{e({success:!0})},error:t=>{e({success:!1,code:t.errorCode})}})}))).then((e=>{e.success?(r(Zt.ACTIVATING),Kt(t).then((e=>{e.success?r(Zt.ACTIVE):r(Zt.ERROR)}))):r(Zt.ERROR)}))},className:"flex w-full justify-center font-bold rounded hover:opacity-90 transition-opacity",disabled:g,isBusy:g},n===Zt.IDLE&&e.cta,n===Zt.INSTALLED&&e.activate,n===Zt.INSTALLING&&e.installing,n===Zt.ACTIVATING&&e.activating),n===Zt.ACTIVE&&(0,s.createElement)("div",{className:"flex items-center justify-center gap-3 py-3 px-4 rounded-md bg-emerald-100 border border-solid border-emerald-200"},(0,s.createElement)("span",{className:"font-medium text-sm text-emerald-700"},e.activated)),n===Zt.ERROR&&(0,s.createElement)("div",{className:"text-center py-3 px-4 rounded-md bg-red-100 border border-solid border-red-200"},(0,s.createElement)("span",{className:"font-medium text-sm text-red-700"},e.error))))},Yt=({settings:e})=>{const t="enabled"===e?.lazyload,a="enabled"===e?.image_replacer,o=[{active:a,label:optimoleDashboardApp.strings.optimization_status.statusTitle1,description:optimoleDashboardApp.strings.optimization_status.statusSubTitle1},{active:t,label:optimoleDashboardApp.strings.optimization_status.statusTitle2,description:optimoleDashboardApp.strings.optimization_status.statusSubTitle2},{active:t&&"disabled"===e?.scale,label:optimoleDashboardApp.strings.optimization_status.statusTitle3,description:optimoleDashboardApp.strings.optimization_status.statusSubTitle3}].map((e=>({...e,active:a&&e.active})));return(0,s.createElement)("div",{className:"bg-white flex flex-col text-gray-700 border-0 rounded-lg shadow-md p-8"},(0,s.createElement)("h3",{className:"text-lg mt-0"},optimoleDashboardApp.strings.optimization_status.title),(0,s.createElement)("ul",{className:"grid gap-3 m-0"},o.map(((e,t)=>(0,s.createElement)("li",{key:t,className:"flex items-start gap-2"},e.active?(0,s.createElement)(u.Icon,{icon:nt,className:"fill-success bg-success/20 rounded-full",size:20}):(0,s.createElement)(u.Icon,{icon:ct,className:"fill-danger bg-danger/20 rounded-full",size:20}),(0,s.createElement)("div",null,(0,s.createElement)("span",{className:"text-gray-700 font-normal font-semibold"},e.label),(0,s.createElement)("p",{className:"m-0"},e.description)))))),(0,s.createElement)("p",{className:"m-0 mt-5",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.optimization_tips}}))};function Qt({children:e,text:t}){const[a,l]=(0,o.useState)(!1);if(!t)return e;if(!e)return null;const n=m()("absolute text-white bg-gray-800 text-xs p-2 rounded shadow-lg z-10 transition-opacity duration-200 pointer-events-none",{"opacity-100":a,"opacity-0":!a});return(0,s.createElement)("div",{className:"relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},(0,s.createElement)("div",{className:n,style:{left:"50%",transform:"translateX(-50%)",bottom:"120%"}},t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),(0,s.createElement)("div",{className:"absolute -bottom-1 w-2 h-2 bg-gray-800",style:{left:"50%",transform:"translateX(-50%) rotate(45deg)"}})),e)}const Wt=[optimoleDashboardApp.strings.upgrade.reason_1,optimoleDashboardApp.strings.upgrade.reason_2,optimoleDashboardApp.strings.upgrade.reason_3,optimoleDashboardApp.strings.upgrade.reason_4],Xt=({settings:e})=>{const{name:t,domain:a,plan:o}=(0,c.useSelect)((e=>{const{getUserData:t}=e("optimole"),a=t();let s=a?.cdn_key+".i.optimole.com";return void 0!==a?.domain&&""!==a?.domain&&(s=a?.domain),{name:a?.display_name,domain:s,plan:a?.plan}})),l=null!==optimoleDashboardApp.spc_banner;return(0,s.createElement)("div",{className:"grid md:grid-cols-2 xl:flex xl:flex-col xl:mt-8 xl:mb-5 p-0 transition-all ease-in-out duration-700 gap-5 shrink-0 xl:w-[350px]"},(0,s.createElement)("div",{className:"bg-white gap-3 flex flex-col text-gray-700 border-0 rounded-lg shadow-md p-8"},(0,s.createElement)("div",{className:"grid gap-4"},(0,s.createElement)(Jt,{icon:D,value:t,tooltipText:optimoleDashboardApp.strings.logged_in_as}),(0,s.createElement)(Jt,{icon:N,value:a,tooltipText:optimoleDashboardApp.strings.private_cdn_url})),(0,s.createElement)("hr",{className:"m-0 border-t-grayish-blue"}),(0,s.createElement)("div",{className:"border-t border-gray-300 block grid gap-2"},(0,s.createElement)("p",{className:"font-semibold text-xs text-light-black m-0"},optimoleDashboardApp.strings.looking_for_api_key),(0,s.createElement)("span",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.optml_dashboard}}))),"free"===o?(0,s.createElement)("div",{className:"bg-info flex flex-col text-white border-0 rounded-lg overflow-hidden shadow-md bg-promo bg-no-repeat",style:{backgroundImage:`url( ${optimoleDashboardApp.assets_url}/img/logo2.png )`}},optimoleDashboardApp?.bf_notices?.sidebar&&(0,s.createElement)("a",{href:optimoleDashboardApp.bf_notices.sidebar.cta_link,className:"flex flex-col gap-3 p-3 bg-black !no-underline text-center cursor-pointer hover:opacity-90 transition-opacity",target:"_blank"},(0,s.createElement)("span",{className:"font-extrabold text-[17px] uppercase italic",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.bf_notices.sidebar.title}}),(0,s.createElement)("span",{className:"text-[11px] font-bold",dangerouslySetInnerHTML:{__html:optimoleDashboardApp.bf_notices.sidebar.subtitle}})),(0,s.createElement)("div",{className:"p-8 flex flex-col"},(0,s.createElement)("h3",{className:"mt-0 text-white text-lg"},optimoleDashboardApp.strings.upgrade.title_long),(0,s.createElement)("ul",null,Wt.map(((e,t)=>(0,s.createElement)("li",{key:t,className:"flex items-center gap-2"},(0,s.createElement)(u.Icon,{icon:"yes-alt",className:"text-white"}),(0,s.createElement)("span",{className:"text-white font-normal text-base"},e))))),(0,s.createElement)(u.Button,{variant:"link",className:"optml__button flex w-full justify-center font-bold min-h-40 !no-underline !text-white !bg-opaque-black !rounded",href:optimoleDashboardApp.optimoleHome+"pricing",target:"_blank"},optimoleDashboardApp.strings.upgrade.cta))):(0,s.createElement)(u.Button,{variant:"default",className:"bg-white flex font-bold border-0 rounded-lg shadow-md p-8 text-sm justify-center",href:(0,k.addQueryArgs)(optimoleDashboardApp.optimoleHome+"contact/",{contact_name:window.optimoleDashboardApp.user_data.display_name,contact_email:optimoleDashboardApp.user_data.user_email,contact_website:optimoleDashboardApp.home_url}),target:"_blank"},optimoleDashboardApp.strings.premium_support),(0,s.createElement)(Yt,{settings:e}),l&&(0,s.createElement)(Ut,null))},Jt=({icon:e=null,value:t,tooltipText:a=""})=>(0,s.createElement)(Qt,{text:a},(0,s.createElement)("div",{className:"grid grid-cols-1 text-gray-700 hover:text-info transition-all ease-in-out duration-300"},(0,s.createElement)("input",{value:t,type:"text",disabled:!0,className:"col-start-1 row-start-1 block w-full rounded-md !bg-light-blue py-1.5 !pl-9 pr-3 !text-gray-500 !m-0 text-sm !py-0.5 !border-0"}),(0,s.createElement)("span",{className:"pointer-events-none col-start-1 row-start-1 flex items-center ml-3 w-4 h-4 self-center"},e))),ea=({strings:e,onClose:t})=>(0,s.createElement)("div",{className:"flex justify-between px-8 pt-8"},(0,s.createElement)("p",{className:"text-purple-gray text-sm m-0 py-2"},e.title),(0,s.createElement)(u.Button,{label:e.close,icon:ct,onClick:t,className:"text-gray-950"}));window.optimoleCSAT={hasSubmitted:!1,data:{}};const ta=({id:e,show:t=!1,strings:a={},pages:l=[],onDismiss:n=(()=>{})})=>{const[r,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(0),[m,p]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!1),[h,_]=(0,o.useState)({});(0,o.useEffect)((()=>{const t=()=>{!window.optimoleCSAT.hasSubmitted&&window.optimoleCSAT.data?.score&&localStorage.setItem(`optimole_csat_data_${e}`,JSON.stringify(window.optimoleCSAT.data))};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[]),(0,o.useEffect)((()=>{t&&!m&&i(t)}),[t]),(0,o.useEffect)((()=>{window.optimoleCSAT={hasSubmitted:g,data:h}}),[g,h]);const f=(e=!1,t=h)=>{if(n(),g||!t?.score)return p(!0),null;const a={email:optimoleDashboardApp.user_data.user_email,product:"Optimole",site:optimoleDashboardApp.home_url,...t};try{fetch(`https://api.themeisle.com/tracking/csat/${t?.score}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json, */*;q=0.1","Cache-Control":"no-cache"},body:JSON.stringify(a)})}catch(e){console.warn(e)}b(!0),d(l.length),e&&(i(!1),p(!0))};if((0,o.useEffect)((()=>{const t=localStorage.getItem(`optimole_csat_data_${e}`);t&&(f(!0,JSON.parse(t)),localStorage.removeItem(`optimole_csat_data_${e}`))}),[]),!r)return null;if(0===l.length)return null;const E=c<l.length,v=l[c]?.content;return(0,s.createElement)("div",{className:"bg-white fixed left-0 w-auto sm:right-0 sm:left-auto sm:w-full bottom-0 m-12 gap-2 max-w-lg flex flex-col text-gray-700 border-0 rounded-lg shadow-lg z-50"},l[c]&&(0,s.createElement)(s.Fragment,null,l[c]?.showHeader&&(0,s.createElement)(ea,{onClose:()=>{i(!1),p(!0),f()},strings:a}),(0,s.createElement)(v,{data:h,changeData:(e,t=!1)=>{_({...h,...e}),t&&d(c+1)},onSubmit:f})),!E&&(0,s.createElement)("div",{className:"flex flex-col gap-5 p-8 items-center"},(0,s.createElement)(u.Icon,{icon:nt,size:40,className:"bg-success rounded-full fill-white p-2"}),(0,s.createElement)("div",{className:"font-bold text-lg"},optimoleDashboardApp.strings.csat.heading_three),(0,s.createElement)("div",{className:"text-sm text-center"},optimoleDashboardApp.strings.csat.thank_you),(0,s.createElement)(u.Button,{variant:"primary",onClick:()=>i(!1),className:"optml__button basis-full justify-center rounded font-bold min-h-40"},optimoleDashboardApp.strings.csat.close)))},aa=window.wp.api;var sa=a.n(aa);const oa=window.wp.i18n,la=()=>{const[e,t]=(0,o.useState)(!1),[a,l,n]=(()=>{const[e,t]=(0,o.useState)({}),[a,s]=(0,o.useState)("loading"),l=()=>{sa().loadPromise.then((async()=>{try{const e=new(sa().models.Settings),a=await e.fetch();t(a)}catch(e){s("error")}finally{s("loaded")}}))};return(0,o.useEffect)((()=>{l()}),[]),[t=>e?.[t],(e,t,a=(0,oa.__)("Settings saved.","textdomain"))=>{s("saving");const o=new(sa().models.Settings)({[e]:t}).save();o.success(((e,t)=>{"success"===t&&s("loaded"),"error"===t&&s("error"),l()})),o.error((e=>{s("error")}))},a]})(),r="loaded"===n&&void 0!==a("optml_csat")&&JSON.parse(a("optml_csat")),{hasImages:i,isFirstSite:d}=(0,c.useSelect)((e=>{const{getUserData:t}=e("optimole");return{hasImages:0<t()?.images_number,isFirstSite:1===t()?.whitelist?.length}})),m=localStorage.getItem("optimole_settings_visits");return(0,o.useEffect)((()=>{t(i&&d&&3<=parseInt(m)&&!1!==r&&!0!==r?.firstImpressions)}),[m,r]),(0,s.createElement)(s.Fragment,null,(0,s.createElement)(ta,{id:"first-impressions",show:e,onDismiss:()=>l("optml_csat",JSON.stringify({...r,firstImpressions:!0})),strings:{title:optimoleDashboardApp.strings.csat.title,close:optimoleDashboardApp.strings.csat.close},pages:[{showHeader:!0,content:e=>(0,s.createElement)("div",{className:"flex flex-col gap-5 px-8 pb-8"},(0,s.createElement)("div",{className:"font-bold text-lg"},optimoleDashboardApp.strings.csat.heading_one),(0,s.createElement)("div",{className:"flex gap-5"},[1,2,3,4,5].map((t=>(0,s.createElement)(u.Button,{key:t,onClick:()=>e.changeData({score:t},!0),className:"optml__button basis-full justify-center rounded font-bold min-h-40"},t)))),(0,s.createElement)("div",{className:"flex justify-between"},(0,s.createElement)("span",{className:"text-purple-gray text-sm"},optimoleDashboardApp.strings.csat.low),(0,s.createElement)("span",{className:"text-purple-gray text-sm"},optimoleDashboardApp.strings.csat.high)))},{showHeader:!0,content:e=>(0,s.createElement)("div",{className:"flex flex-col gap-5 px-8 pb-8"},(0,s.createElement)("div",{className:"font-bold text-lg"},optimoleDashboardApp.strings.csat.heading_two),(0,s.createElement)(u.TextareaControl,{label:optimoleDashboardApp.strings.csat.heading_two,hideLabelFromVision:!0,value:e.data?.feedback,placeholder:optimoleDashboardApp.strings.csat.feedback_placeholder,onChange:t=>e.changeData({feedback:t})}),(0,s.createElement)("div",{className:"flex justify-end"},(0,s.createElement)("div",{className:"flex gap-2"},(0,s.createElement)(u.Button,{onClick:()=>e.onSubmit(),className:"optml__button basis-full justify-center rounded font-bold min-h-40"},optimoleDashboardApp.strings.csat.skip),(0,s.createElement)(u.Button,{variant:"primary",onClick:()=>e.onSubmit(),className:"optml__button basis-full justify-center rounded font-bold min-h-40"},optimoleDashboardApp.strings.csat.submit))))}]}))},na=()=>{const{urgency:e,title:t,subtitle:a,cta_link:l,cta_text:n,dismiss_key:r}=optimoleDashboardApp.bf_notices.banner,[i,c]=(0,o.useState)(!0),[d,p]=(0,o.useState)(!0);(0,o.useEffect)((()=>{if(!i){const e=setTimeout((()=>{p(!1)}),300);return()=>clearTimeout(e)}}),[i]);const g=m()("relative flex flex-col items-center text-center xl:flex-row gap-5 justify-between xl:items-center bg-black text-white p-5 py-4 pr-7 box-border rounded-lg mt-5 bg-no-repeat transition-all duration-300",{"opacity-0":!i,"opacity-100":i});return d?(0,s.createElement)("div",{className:g,style:{backgroundImage:`url(${optimoleDashboardApp.assets_url}/img/bf-bg.jpg)`,backgroundPosition:"right 0",backgroundSize:"auto 100%"}},(0,s.createElement)(u.Button,{icon:kt,onClick:()=>{Ne(r,(()=>{c(!1)}))},label:optimoleDashboardApp.strings.csat.close,className:"absolute right-1 top-1 cursor-pointer text-white hover:text-promo-orange"}),(0,s.createElement)("div",{className:"flex flex-col gap-3 xl:items-start items-center"},(0,s.createElement)("div",{className:"text-sm lg:text-base border-b border-0 border-dashed uppercase pb-1 font-semibold"},e),(0,s.createElement)("div",{className:"text-4xl lg:text-5xl italic uppercase font-extrabold",dangerouslySetInnerHTML:{__html:t}}),(0,s.createElement)("div",{className:"text-sm lg:text-base font-extrabold",dangerouslySetInnerHTML:{__html:a}})),(0,s.createElement)("a",{href:l,target:"_blank",className:"bg-promo-orange text-white px-7 py-3 uppercase text-base font-bold grow flex justify-center max-w-[150px] text-center cursor-pointer hover:bg-white hover:text-orange-400 transition-colors"},n)):null},ra=({tab:e,setTab:t})=>{const{isConnected:a,hasApplication:l,hasConflicts:n,siteSettings:r,extraVisits:i,plan:d}=(0,c.useSelect)((e=>{const{isConnected:t,hasApplication:a,getConflicts:s,getSiteSettings:o,getUserData:l}=e("optimole"),n=s(),r=o(),i=l();return{plan:i?.plan,isConnected:t(),hasApplication:a(),hasConflicts:0<n.count||0,siteSettings:r,extraVisits:r.banner_frontend}})),{setQueryArgs:m}=(0,c.useDispatch)("optimole"),[p,g]=(0,o.useState)(!1),[u,b]=(0,o.useState)("general"),[h,_]=(0,o.useState)(!1),[f,E]=(0,o.useState)(r);(0,o.useEffect)((()=>{a&&l&&(j(!0),L()({path:optimoleDashboardApp.routes.poll_conflicts,method:"GET",parse:!1}).then((e=>200<=e.status&&300>e.status?e.json():(console.log(`%c Request failed with status ${e.status}`,"color: #E7602A"),Promise.resolve()))).then((e=>{j(!1),e&&$(e.data)})))}),[]),(0,o.useEffect)((()=>{n&&g(!0)}),[n]),(0,o.useEffect)((()=>{E({...f,banner_frontend:i})}),[i]),(0,o.useEffect)((()=>{window.onbeforeunload=h?()=>!0:null}),[h]);const v="free"===d&&optimoleDashboardApp?.bf_notices?.banner;return(0,s.createElement)("div",{className:"optml-connected 2xl:max-w-screen-xl max-w-screen px-4 mx-auto"},v&&(0,s.createElement)(na,null),(0,s.createElement)("div",{className:"flex flex-col xl:flex-row mx-auto gap-5"},(0,s.createElement)("div",{className:"flex flex-col mt-8 xl:mb-5 p-0 transition-all ease-in-out duration-700 relative text-gray-700 grow"},"dashboard"===e&&(0,s.createElement)(Qe,null),"conflicts"===e&&p&&(0,s.createElement)(Xe,null),"settings"===e&&(0,s.createElement)(Rt,{tab:u,setTab:b,canSave:h,setCanSave:_,settings:f,setSettings:E}),"help"===e&&(0,s.createElement)($t,null)),(0,s.createElement)(Xt,{settings:f})),(0,s.createElement)(la,null))},ia=[{label:optimoleDashboardApp.strings.optimole+" "+optimoleDashboardApp.strings.version,href:optimoleDashboardApp.optimoleHome},{label:optimoleDashboardApp.strings.terms_menu,href:optimoleDashboardApp.optimoleHome+"terms/"},{label:optimoleDashboardApp.strings.privacy_menu,href:optimoleDashboardApp.optimoleHome+"privacy-policy/"},{label:optimoleDashboardApp.strings.testdrive_menu,href:optimoleDashboardApp.optimoleHome+"test-drive?url="+optimoleDashboardApp.home_url}],ca=()=>(0,s.createElement)("footer",{className:"max-w-screen-xl gap-3 md:gap-0 mx-auto my-5 flex justify-between text-base flex-col md:flex-row"},(0,s.createElement)("div",{dangerouslySetInnerHTML:{__html:optimoleDashboardApp.strings.account_needed_subtitle_3}}),(0,s.createElement)("nav",{className:"flex gap-0 sm:gap-3 flex-wrap md:flex-nowrap"},ia.map(((e,t)=>(0,s.createElement)(u.ExternalLink,{key:t,href:e.href,className:"basis-1/2 sm:basis-auto"},e.label))))),da=window.lodash;function ma(){const e=(0,c.useSelect)((e=>e(T.store).getNotices()),[]),{removeNotice:t}=(0,c.useDispatch)(T.store),a=(0,da.filter)(e,{type:"snackbar"});return(0,s.createElement)(u.SnackbarList,{notices:a,className:"px-2 bottom-4 fixed",onRemove:t})}(0,o.render)((0,s.createElement)((()=>{const e=window.location.hash.replace("#","");let t=["dashboard","settings","help"].includes(e)?e:"dashboard";const[a,l]=(0,o.useState)(t),n=e=>{e.preventDefault(),l("settings")},r=e=>{e.preventDefault(),l("dashboard")},{showDisconnect:i,isConnected:d,hasApplication:m,hasDashboardLoaded:p}=(0,c.useSelect)((e=>{const{showDisconnect:t,isConnected:a,hasApplication:s,hasDashboardLoaded:o}=e("optimole");return{showDisconnect:t(),isConnected:a(),hasApplication:s(),hasDashboardLoaded:o()}}));return(0,o.useEffect)((()=>{d&&(window.location.hash=`#${a}`,I.forEach((e=>{const t=document.querySelector(`a[href="${e.href}"]`);if(!t)return;const a=t.parentNode;if(e.hash&&e.hash===window.location.hash)return t.classList.add("current"),void a.classList.add("current");t.classList.remove("current"),a.classList.remove("current")})))}),[a]),(0,o.useEffect)((()=>{if(!d)return;const e=document.querySelector('a[href*="page=optimole"]'),t=document.querySelector('a[href*="page=optimole#settings"]');return e&&t?(e.addEventListener("click",r),t.addEventListener("click",n),()=>{e&&t&&(e.removeEventListener("click",r),t.removeEventListener("click",n))}):void 0}),[]),(0,s.createElement)("div",{className:"antialiased"},(0,s.createElement)(De,{tab:a,setTab:l}),!(d&&m)&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Oe,null),(0,s.createElement)(ca,null)),d&&m&&!p&&(0,s.createElement)(je,null),d&&i&&(0,s.createElement)(Ce,null),d&&m&&p&&(0,s.createElement)(ra,{tab:a,setTab:l}),(0,s.createElement)(ma,null))}),null),document.getElementById("optimole-app"))},184:(e,t)=>{var a;!function(){"use strict";var s={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var l=typeof a;if("string"===l||"number"===l)e.push(a);else if(Array.isArray(a)){if(a.length){var n=o.apply(null,a);n&&e.push(n)}}else if("object"===l){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var r in a)s.call(a,r)&&a[r]&&e.push(r)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(a=function(){return o}.apply(t,[]))||(e.exports=a)}()},864:(e,t,a)=>{(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},s={};t.r(s),t.d(s,{default:()=>c});const o=a(196);var l=t.n(o);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=e=>{const{aspectRatio:t="taller",handle:a=null,handleSize:s=40,hover:n=!1,leftImage:i,leftImageAlt:c="",leftImageCss:d={},leftImageLabel:m=null,onSliderPositionChange:p=(()=>{}),rightImage:g,rightImageAlt:u="",rightImageCss:b={},rightImageLabel:h=null,skeleton:_=null,sliderLineColor:f="#ffffff",sliderLineWidth:E=2,sliderPositionPercentage:v=.5,vertical:y=!1}=e,x=!y,[w,A]=(0,o.useState)(v),[S,N]=(0,o.useState)(0),[D,C]=(0,o.useState)(0),[L,k]=(0,o.useState)(!1),[T,I]=(0,o.useState)(!1),[O,M]=(0,o.useState)(!1),z=(0,o.useRef)(null),j=(0,o.useRef)(null),B=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=z.current,t=new ResizeObserver((e=>{let[t,...a]=e;const s=t.target.getBoundingClientRect().width;N(s)}));return t.observe(e),()=>t.disconnect()}),[]),(0,o.useEffect)((()=>(B.current.complete&&k(!0),()=>{k(!1)})),[i]),(0,o.useEffect)((()=>(j.current.complete&&I(!0),()=>{I(!1)})),[g]);const R=T&&L;(0,o.useEffect)((()=>{const e=e=>{const t=e||window.event,a=t.touches?t.touches[0].pageX:t.pageX,s=t.touches?t.touches[0].pageY:t.pageY,o=a-window.pageXOffset,l=s-window.pageYOffset,n=j.current.getBoundingClientRect();let r=x?o-n.left:l-n.top;const i=0+E/2,c=x?S-E/2:D-E/2;r<i&&(r=i),r>c&&(r=c),A(x?r/S:r/D),p&&p(x?r/S:r/D)},a=t=>{M(!0),"touches"in t||t.preventDefault(),e(t),window.addEventListener("mousemove",e),window.addEventListener("touchmove",e)},s=()=>{M(!1),window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e)},o=z.current;if(R){o.addEventListener("touchstart",a),window.addEventListener("touchend",s),n?(o.addEventListener("mousemove",e),o.addEventListener("mouseleave",s)):(o.addEventListener("mousedown",a),window.addEventListener("mouseup",s));const l=B.current.naturalHeight/B.current.naturalWidth,r=j.current.naturalHeight/j.current.naturalWidth,i="taller"===t?Math.max(l,r):Math.min(l,r);C(S*i)}return()=>{o.removeEventListener("touchstart",a),window.removeEventListener("touchend",s),o.removeEventListener("mousemove",e),o.removeEventListener("mouseleave",s),o.removeEventListener("mousedown",a),window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e)}}),[R,t,D,S,x,n,E,y]);const H={container:{boxSizing:"border-box",position:"relative",width:"100%",height:`${D}px`,overflow:"hidden"},rightImage:r({clip:x?`rect(auto, auto, auto, ${S*w}px)`:`rect(${D*w}px, auto, auto, auto)`,display:"block",height:"100%",objectFit:"cover",position:"absolute",width:"100%"},b),leftImage:r({clip:x?`rect(auto, ${S*w}px, auto, auto)`:`rect(auto, auto, ${D*w}px, auto)`,display:"block",height:"100%",objectFit:"cover",position:"absolute",width:"100%"},d),slider:{alignItems:"center",cursor:!n&&x?"ew-resize":!n&&!x&&"ns-resize",display:"flex",flexDirection:x?"column":"row",height:x?"100%":`${s}px`,justifyContent:"center",left:x?S*w-s/2+"px":0,position:"absolute",top:x?0:D*w-s/2+"px",width:x?`${s}px`:"100%"},line:{background:f,boxShadow:"0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)",flex:"0 1 auto",height:x?"100%":`${E}px`,width:x?`${E}px`:"100%"},handleCustom:{alignItems:"center",boxSizing:"border-box",display:"flex",flex:"1 0 auto",height:"auto",justifyContent:"center",width:"auto"},handleDefault:{alignItems:"center",border:`${E}px solid ${f}`,borderRadius:"100%",boxShadow:"0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)",boxSizing:"border-box",display:"flex",flex:"1 0 auto",height:`${s}px`,justifyContent:"center",width:`${s}px`,transform:x?"none":"rotate(90deg)"},leftArrow:{border:`inset ${.15*s}px rgba(0,0,0,0)`,borderRight:`${.15*s}px solid ${f}`,height:"0px",marginLeft:`-${.25*s}px`,marginRight:.25*s+"px",width:"0px"},rightArrow:{border:`inset ${.15*s}px rgba(0,0,0,0)`,borderLeft:`${.15*s}px solid ${f}`,height:"0px",marginRight:`-${.25*s}px`,width:"0px"},leftLabel:{background:"rgba(0, 0, 0, 0.5)",color:"white",left:x?"5%":"50%",opacity:O?0:1,padding:"10px 20px",position:"absolute",top:x?"50%":"3%",transform:x?"translate(0,-50%)":"translate(-50%, 0)",transition:"opacity 0.1s ease-out"},rightLabel:{background:"rgba(0, 0, 0, 0.5)",color:"white",opacity:O?0:1,padding:"10px 20px",position:"absolute",left:x?null:"50%",right:x?"5%":null,top:x?"50%":null,bottom:x?null:"3%",transform:x?"translate(0,-50%)":"translate(-50%, 0)",transition:"opacity 0.1s ease-out"},leftLabelContainer:{clip:x?`rect(auto, ${S*w}px, auto, auto)`:`rect(auto, auto, ${D*w}px, auto)`,height:"100%",position:"absolute",width:"100%"},rightLabelContainer:{clip:x?`rect(auto, auto, auto, ${S*w}px)`:`rect(${D*w}px, auto, auto, auto)`,height:"100%",position:"absolute",width:"100%"}};return l().createElement(l().Fragment,null,_&&!R&&l().createElement("div",{style:r({},H.container)},_),l().createElement("div",{style:r(r({},H.container),{},{display:R?"block":"none"}),ref:z,"data-testid":"container"},l().createElement("img",{onLoad:()=>I(!0),alt:u,"data-testid":"right-image",ref:j,src:g,style:H.rightImage}),l().createElement("img",{onLoad:()=>k(!0),alt:c,"data-testid":"left-image",ref:B,src:i,style:H.leftImage}),l().createElement("div",{style:H.slider},l().createElement("div",{style:H.line}),a?l().createElement("div",{style:H.handleCustom},a):l().createElement("div",{style:H.handleDefault},l().createElement("div",{style:H.leftArrow}),l().createElement("div",{style:H.rightArrow})),l().createElement("div",{style:H.line})),m&&l().createElement("div",{style:H.leftLabelContainer},l().createElement("div",{style:H.leftLabel},m)),h&&l().createElement("div",{style:H.rightLabelContainer},l().createElement("div",{style:H.rightLabel},h))))};e.exports=s})()},196:e=>{"use strict";e.exports=window.React}},a={};function s(e){var o=a[e];if(void 0!==o)return o.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,s),l.exports}s.m=t,e=[],s.O=(t,a,o,l)=>{if(!a){var n=1/0;for(d=0;d<e.length;d++){for(var[a,o,l]=e[d],r=!0,i=0;i<a.length;i++)(!1&l||n>=l)&&Object.keys(s.O).every((e=>s.O[e](a[i])))?a.splice(i--,1):(r=!1,l<n&&(n=l));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,o,l]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var o,l,[n,r,i]=a,c=0;if(n.some((t=>0!==e[t]))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(i)var d=i(s)}for(t&&t(a);c<n.length;c++)l=n[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},a=globalThis.webpackChunkoptimole_wp=globalThis.webpackChunkoptimole_wp||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=s.O(void 0,[431],(()=>s(730)));o=s.O(o)})();